<div class="edit-modal" *ngIf="modelData.type == 'status'">
  <form validate #f="ngForm" name="update_basic" (ngSubmit)="f.form.valid && submit('status')">
    <p class="heading">Update Status</p>
    <div mat-dialog-content>
      <div class="cs-form">
        <div class="row">
          <div class="col s12">
            <mat-form-field class="cs-input" appearance="outline">
              <mat-label>Status</mat-label>
              <mat-select name="status" #status="ngModel" [(ngModel)]="data.status" required>
                <mat-option value="Pending" [disabled]="true">Pending </mat-option>
                <mat-option value="Close">Close</mat-option>
              </mat-select>
            </mat-form-field>
            <div class="alert alert-danger" *ngIf="f.submitted && status?.invalid">
              <p> {{ 'This field is required'}}</p>
            </div>
          </div>
          
        </div>
        <div class="row" *ngIf="data.status=='Close'">
          <div class="col s12">
            <mat-form-field class="cs-input" appearance="outline">
              <mat-label>Close Status</mat-label>
              <mat-select name="substatus" #substatus="ngModel" [(ngModel)]="data.substatus" required>
                <mat-option value="Close accepted" >Close Accepted </mat-option>
                <mat-option value="Close not accepted">Close Not accepted</mat-option>
              </mat-select>
            </mat-form-field>
            <div class="alert alert-danger" *ngIf="f.submitted && substatus?.invalid">
              <p> {{ 'This field is required'}}</p>
            </div>
          </div>
          
        </div>

        <div class="row">
          <div class="col s12">
            <mat-form-field class="cs-input" appearance="outline">
              <mat-label>Remark</mat-label>
              <textarea class="h100" matInput name="reason" placeholder="Type here..." #close_remark="ngModel"
              [(ngModel)]="data.close_remark" pattern="^(?! )[^\r\n]*$" [ngClass]="{'has-error' : close_remark.invalid } " required></textarea>
            </mat-form-field>
            <div class="alert alert-danger" *ngIf="close_remark.touched || f.submitted">
              <p *ngIf="close_remark.errors?.required">This field is required</p>
              <p *ngIf="close_remark.errors?.pattern">This field is Invalid</p>
          </div>
          </div>
        </div>
      </div>
    </div>
    <div mat-dialog-actions>
      <button mat-stroked-button color="warn" [mat-dialog-close]="false">Cancel</button>
      <button mat-raised-button color="accent" type="submit" [disabled]="savingFlag == true"
      [ngClass]="{'loading': savingFlag == true}">
      {{savingFlag == true ? 'Saving' : 'Save'}}
    </button>
  </div>
</form>
</div>




<div class="edit-modal" *ngIf="modelData.type == 'add'">
  <form validate #f="ngForm" name="f" (ngSubmit)="f.form.valid && submitAlert('ticket')">
    <p class="heading">Raise New Ticket</p>
    <div mat-dialog-content>
      <div class="cs-form">
        <div class="row">
          <div class="col s12 m3 l3">
            <mat-form-field appearance="outline">
              <mat-label>Customer Type</mat-label>
              <mat-select name="dr_type" [(ngModel)]="data.dr_type" #dr_type="ngModel"
              (selectionChange)="distributors(''); findName('network',data.dr_type);" required
              [disabled]="modelData.network_type.pagetype == 'de_detail'">
              <ng-container *ngFor="let row of service.orgUerArray">
                <mat-option value="{{row.type}}">{{row.type ? (row.type | titlecase) : '---'}}</mat-option>
              </ng-container>
            </mat-select>
          </mat-form-field>
          
          <div class="alert alert-danger" *ngIf="dr_type.touched || f.submitted">
            <p *ngIf="dr_type.errors?.required">This field is required</p>
          </div>
        </div>
        
        <div class="col s12 m5 l5">
          <mat-form-field appearance="outline">
            <mat-label>
              {{ data.dr_type ?  data.dr_type : 'Select Customer Type First'}}
            </mat-label>
            <mat-select name="customer_id" [(ngModel)]="data.customer_id" #customer_id="ngModel"
            [disabled]="!data.dr_type || modelData.network_type.pagetype == 'de_detail'"
            (selectionChange)="findName('customer',data.customer_id);" required>
            <mat-option>
              <ngx-mat-select-search noEntriesFoundLabel="'no data found'"
              (keyup)="distributors($event.target.value)" placeholderLabel="Search.."></ngx-mat-select-search>
            </mat-option>
            <mat-option *ngFor="let row of dealerList" value="{{row.id}}">{{row.name ? (row.name | titlecase) : '---'}}  {{row.mobile ? ( '-' + row.mobile) : ''}}</mat-option>
          </mat-select>
        </mat-form-field>
        
        <div class="alert alert-danger" *ngIf="customer_id.touched || f.submitted">
          <p *ngIf="customer_id.errors?.required">This field is required</p>
        </div>
      </div>
      
      <div class="col s12 m4 l4">
        <mat-form-field appearance="outline">
          <mat-label>Ticket Type</mat-label>
          <mat-select name="type" [(ngModel)]="data.type" #type="ngModel"
          (selectionChange)="findName('ticket',data.type);" required>
          <mat-option *ngFor="let row of tickets" value="{{row.id}}">{{row.category_name}}</mat-option>
        </mat-select>
      </mat-form-field>
      
      <div class="alert alert-danger" *ngIf="type.touched || f.submitted">
        <p *ngIf="type.errors?.required">This field is required</p>
      </div>
    </div>
    
  </div>
  
  <div class="row">
    <div class="col s12">
      <mat-form-field class="cs-input" appearance="outline">
        <mat-label>Remark</mat-label>
        <textarea class="h100" matInput name="remarks" placeholder="Type here..." #remarks="ngModel"
        [(ngModel)]="data.remarks" required></textarea>
      </mat-form-field>
      <div class="alert alert-danger" *ngIf="f.submitted && remarks?.invalid">
        <p> {{ 'This field is required'}}</p>
      </div>
    </div>
  </div>
  
  <div class="row">
    <div class="col s12">
      <div class="uploade-image">
        <ul>
          <li *ngFor="let image of supportImage; let i=index">
            <img src="{{image.id ? url+image.actual_image_name : image}}">
            <span class="cancel-icon">
              <i class="material-icons crose-icon" (click)="deleteProductImage(i,image.id)">clear</i>
            </span>
          </li>
          
          <li class="add-bg-1">
            <label>
              <input type="file" (change)="onUploadChange($event)" ng2FileSelect #fileInput style="display:none;"
              accept=".png, .jpg, .jpeg" multiple required />
              <div class="other">
                <i class="material-icons">cloud_upload</i>
                <p>Upload Images</p>
              </div>
            </label>
          </li>
        </ul>
      </div>
      
    </div>
  </div>
</div>
</div>
<div mat-dialog-actions>
  <button mat-stroked-button color="warn" [mat-dialog-close]="false">Cancel</button>
  <button mat-raised-button color="accent" type="submit" [disabled]="savingFlag == true"
  [ngClass]="{'loading': savingFlag == true}">
  {{savingFlag == true ? 'Saving' : 'Save'}}
</button>
</div>
</form>
</div>


<div class="edit-modal" *ngIf="modelData.type == 'brandStatus'">
  <form validate #f="ngForm" name="update_basic" (ngSubmit)="f.form.valid && submit('brandStatus')">
    <p class="heading">Update Status</p>
    <div mat-dialog-content>
      <div class="cs-form">
        <div class="row">
          <div class="col s12">
            <mat-form-field class="cs-input" appearance="outline">
              <mat-label>Status</mat-label>
              <mat-select name="status" #status="ngModel" [(ngModel)]="data.status" required>
                <mat-option value="Pending" [disabled]="true">Pending </mat-option>
                <mat-option value="Approved">Approved</mat-option>
                <mat-option value="Reject">Reject</mat-option>
              </mat-select>
            </mat-form-field>
            <div class="alert alert-danger" *ngIf="f.submitted && status?.invalid">
              <p> {{ 'This field is required'}}</p>
            </div>
          </div>
          
        </div>

        <div class="row" *ngIf="data.status == 'Approved'">

          <div class="col s12">
            <mat-form-field appearance="outline">
              <mat-label>Enter Amount Value</mat-label>
              <input matInput placeholder="Type Here ..." name="value" #value="ngModel" [(ngModel)]="data.value" maxlength="10"  onkeypress="return event.charCode>=48 && event.charCode<=57" required>
            </mat-form-field>
            <div class="alert alert-danger" *ngIf="f.submitted && value?.invalid">
              <p> {{ 'This field is required'}}</p>
            </div>

          </div>
        </div>
        
        <div class="row">
          <div class="col s12" *ngIf="data.status=='Reject'">
            <mat-form-field class="cs-input" appearance="outline">
              <mat-label>Reason</mat-label>
              <textarea class="h100" matInput name="reason" placeholder="Reason" #reason="ngModel"
              [(ngModel)]="data.reason"  [ngClass]="{'has-error' : reason.invalid } " required></textarea>
            </mat-form-field>
            <div class="alert alert-danger" *ngIf="reason.touched || f.submitted">
              <p *ngIf="reason.errors?.required">Reason is Required....</p>
          </div>
          </div>
        </div>

      </div>
    </div>
    <div mat-dialog-actions>
      <button mat-stroked-button color="warn" [mat-dialog-close]="false">Cancel</button>
      <button mat-raised-button color="accent" type="submit" [disabled]="savingFlag == true"
      [ngClass]="{'loading': savingFlag == true}">
      {{savingFlag == true ? 'Saving' : 'Save'}}
    </button>
  </div>
</form>
</div>



