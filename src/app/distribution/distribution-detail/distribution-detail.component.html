<div class="main-container">
    <div class="tools-container" *ngIf="login_data.user_type!='DMS'">
        <a mat-icon-button matTooltip="Back" (click)="back()">
            <i class="material-icons">arrow_back</i>
        </a>
        <h2>{{dr_detail?.company_name ? (dr_detail?.company_name | titlecase) : '---'}}</h2>
        <div class="left-auto df" style="overflow: auto;">
            <div class="mat-tabbar df">
                <button mat-button [ngClass]="{'active' :tabType== 'Profile'}"
                    (click)="distributorDetail();DistributorTarget();DistributorSalesChr();; tabType= 'Profile'">
                    <i class="material-icons">person</i>Basic Detail
                </button>


                <ng-container
                    *ngIf="(logined_user_data.organisation_data.home_page_sfa == 'Default' || logined_user_data.organisation_data.home_page_dms == 'Default')">
                    <button mat-button [ngClass]="{'active' :tabType== 'Checkin'}"
                        (click)="clearFilter();  getCheckin(); tabType = 'Checkin'"
                        *ngIf="this.logined_user_data?.organisation_data?.sfa==1">
                        <i class="material-icons">location_pin</i>Checkin
                    </button>

                    <ng-container *ngIf="paramsTab!='Lead'">
                        <button mat-button *ngIf="user_type == '1' || user_type == '7'"
                            [ngClass]="{'active' :tabType== 'Segment'}"
                            (click)=" clearFilter();  getSegment();tabType = 'Segment'">
                            <i class="material-icons">discount</i>Category Discount
                        </button>

                        <button mat-button *ngIf="logined_user_data.organisation_data.net_price==1"
                            [ngClass]="{'active' :tabType== 'Product'}"
                            (click)=" clearFilter();  getProducts();tabType = 'Product'">
                            <i class="material-icons">category</i>Products
                        </button>


                        <button mat-button *ngIf="user_type == '1' || user_type == '7'"
                            [ngClass]="{'active' :tabType== 'Primary Order'}"
                            (click)="clearFilter(); getPrimaryOrder('',currentMonth_no,currentYear,'Approved');  tabType = 'Primary Order'">
                            <i class="material-icons">shopping_cart</i>{{user_type == '1' ? 'Primary' : ''}} Order
                        </button>
                        <button mat-button *ngIf="dr_detail?.secondary_enable == 1 || user_type == '3'"
                            [ngClass]="{'active' :tabType== 'Secondary Order'}"
                            (click)="clearFilter();  getSecondaryOrder('',currentMonth_no,currentYear,'Approved'); tabType = 'Secondary Order'">
                            <i class="material-icons">shopping_cart</i> {{user_type == '1' ? 'Secondary' : ''}} Order
                        </button>
                        <button mat-button
                            *ngIf="(dr_detail?.secondary_enable == 1 || user_type == '3') && logined_user_data?.organisation_data?.dms==1"
                            [ngClass]="{'active' :tabType== 'transaction'}"
                            (click)="clearFilter();  getSecondaryWalletTransaction(); tabType = 'transaction'">
                            <i class="material-icons">swap_horiz</i> Wallet Transaction
                        </button>
                        <button mat-button *ngIf="dr_detail?.secondary_enable == 1"
                            [ngClass]="{'active' :tabType== 'Retailer'}"
                            (click)="clearFilter();  getRetailer(); tabType = 'Retailer'">
                            <i class="material-icons">storefront</i>Secondary Network
                        </button>
                        <button mat-button *ngIf="user_type != '3' && this.logined_user_data?.organisation_data?.sfa==1"
                            [ngClass]="{'active' :tabType== 'Target'}"
                            (click)="clearFilter(); getTarget(currentMonth_no,currentYear); tabType = 'Target'">
                            <i class="material-icons">trending_up</i>Target
                        </button>
                    </ng-container>


                    <ng-container *ngIf="login_data.organisation_data.dms== '1'">
                        <!-- <button mat-button *ngIf="user_type == '1' && drType == 'Channel Partner'" [ngClass]="{'active' :tabType== 'transferRequests'}" (click)="clearFilter(); getTransferRequests(activeTab); tabType = 'transferRequests'">
                        <i class="material-icons">swap_horiz</i>Transfer Points Requests - {{drType}}
                    </button> -->
                        <!-- <button mat-button *ngIf="user_type == '3' && drType != 'Channel Partner'" [ngClass]="{'active' :tabType== 'sendRequest'}" (click)="clearFilter(); getSendRequest(activeTab); tabType = 'sendRequest'">
                        <i class="material-icons">send</i>Send Points Requests
                    </button> -->
                        <!-- <button mat-button *ngIf="user_type == '1' || user_type == '3'" [ngClass]="{'active' :tabType== 'stock'}" (click)="clearFilter(); getDrStock(stockTab); tabType = 'stock'">
                        <i class="material-icons">inventory</i>Stock
                    </button> -->
                        <button mat-button *ngIf="user_type != '3'" [ngClass]="{'active' :tabType== 'Ledger'}"
                            (click)="clearFilter(); invoice_data(currentMonth_no,currentYear);; tabType = 'Ledger'">
                            <i class="material-icons">receipt_long</i>Account Ledger
                        </button>
                        <button mat-button *ngIf="dr_detail?.secondary_enable == 1"
                            [ngClass]="{'active' :tabType== 'Secondary Billing'}"
                            (click)="clearFilter(); tabType = 'Secondary Billing'">
                            <i class="material-icons">photo_library</i>Secondary Billing
                        </button>
                    </ng-container>
                </ng-container>
                <!-- <button mat-button *ngIf="user_type != '7'" [ngClass]="{'active' :tabType== 'Point Ledger'}" (click)="clearFilter(); getPointLedger(); tabType = 'Point Ledger'">
        <i class="material-icons">receipt_long</i>Point Ledger
    </button> -->
            </div>
        </div>
    </div>

    <div class="container pt10 pl10 pr10 pb100">
        <ng-container *ngIf="tabType== 'Profile'">
            <div class="row">
                <div
                    [class]="(logined_user_data.organisation_data.home_page_sfa == 'Influencer' || logined_user_data.organisation_data.home_page_dms == 'Influencer') ? 'col s12 m12 l12' : paramsTab!='Lead'&&(activeAcc?.parent_id==0||login_data?.user_type!='DMS')?'col s12 m8 l8':  'col s12 m12 l12'">
                    <ng-container
                        *ngIf="(logined_user_data.organisation_data.home_page_sfa == 'Default' || logined_user_data.organisation_data.home_page_dms == 'Default') && (activeAcc?.parent_id==0||login_data?.user_type!='DMS')">
                        <div class="card-container" *ngIf="!skLoading && paramsTab!='Lead'">
                            <div class="card-box or-gr">
                                <p>{{dr_detail.dr_sale_category ? dr_detail.dr_sale_category : '---'}}</p>
                                <span>Customer Category</span>
                            </div>
                            <div class="card-box pn-gr" *ngIf="this.logined_user_data?.organisation_data?.sfa==1">
                                <p *ngIf="dr_detail.last_visit_days">
                                    {{dr_detail.last_visit_days == 0 ? 'Today' : dr_detail.last_visit_days + " day's
                                    ago" }}
                                </p>
                                <p *ngIf="!dr_detail.last_visit_days">---</p>
                                <span>Last Visit</span>
                            </div>
                            <div class="card-box bl-gr">
                                <p *ngIf="dr_detail.last_order_days">
                                    {{dr_detail.last_order_days == 0 ? 'Today' : dr_detail.last_order_days + " day's
                                    ago" }}
                                </p>
                                <p *ngIf="!dr_detail.last_order_days">---</p>
                                <span>Last Order</span>
                            </div>
                            <div class="card-box grey-gr">
                                <p>{{dr_detail.order_frequency == '0' ? '---' : dr_detail.order_frequency + " day"}}</p>
                                <span>Order Frequency</span>
                            </div>
                            <ng-container *ngIf="user_type == '1' || user_type == '7'">
                                <div class="card-box rd-gr" *ngIf="login_data.organisation_data.dms== '1'">
                                    <p>{{dr_detail.last_payment_days ?dr_detail.last_payment_days+" "+"Day's ago" : 0}}
                                    </p>
                                    <span>Last Payment</span>
                                </div>
                                <ng-container *ngIf="dr_detail?.secondary_enable == 1 ">
                                    <div class="card-box pink-gr">
                                        <p>{{dr_detail.total_retailer}}</p>
                                        <span>Secondary Network</span>
                                    </div>
                                </ng-container>
                                <div class="card-box rd-gr">
                                    <p>&#x20B9; {{dr_detail.current_year_sales ?(dr_detail.current_year_sales |
                                        number:'1.0-0') : 0}}</p>
                                    <span>Primary Sale</span>
                                </div>
                                <ng-container *ngIf="dr_detail?.secondary_enable == 1 ">
                                    <div class="card-box pr-gr">
                                        <p>&#x20B9; {{dr_detail.current_year_secondary_sales
                                            ? (dr_detail.current_year_secondary_sales | number:'1.0-0') : 0}}</p>
                                        <span>Secondary Sale</span>
                                    </div>
                                </ng-container>
                            </ng-container>
                        </div>
                    </ng-container>

                    <div class="card" *ngIf="!skLoading">
                        <div class="card-head">
                            <h2>Basic Details</h2>
                            <div class="left-auto"
                                *ngIf="(login_data.edit_primary_network=='1') || (login_data.edit_secondary_network=='1') ||  (user_type == '1' && login_data.edit_channel_partner=='1')|| (user_type == '3' && login_data.edit_dealer=='1') || (user_type == '7' && login_data.edit_direct_dealers=='1')">
                                <a class="sm-mat-icon-button" mat-icon-button matTooltip="Edit Detail"
                                    [routerLink]="[ 'edit-distribution/', encrypt_id, user_type, 'edit' ]"
                                    [queryParams]="{'state':dr_detail.state, 'id':encrypt_id, 'type':user_type, 'network_type':networkName}">
                                    <i class="material-icons">edit</i>
                                </a>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="grid-box">
                                <div class="block-feilds">
                                    <span>Customer Type</span>
                                    <p>{{dr_detail?.customer_network_type ? dr_detail?.customer_network_type : '---'}}
                                    </p>
                                </div>

                                <div class="block-feilds">
                                    <span>Company Name</span>
                                    <p>{{dr_detail?.company_name}}</p>
                                </div>

                                <div class="block-feilds">
                                    <span>Contact Person</span>
                                    <p>{{dr_detail.name | titlecase}}</p>
                                </div>

                                <div class="block-feilds">
                                    <span>Mobile Number</span>
                                    <p>{{dr_detail.mobile}}</p>
                                </div>

                                <div class="block-feilds">
                                    <span>Customer ID</span>
                                    <p>{{dr_detail.id ? ('#'+ dr_detail.id) : '---'}}</p>
                                </div>

                                <div class="block-feilds">
                                    <span>Account Code</span>
                                    <p>{{dr_detail.dr_code}}</p>
                                </div>
                                <div class="block-feilds">
                                    <span>Alternative Number</span>
                                    <p>{{dr_detail.altNumber ? dr_detail.altNumber :'---'}}</p>
                                </div>

                                <div class="block-feilds">
                                    <span>Email Id</span>
                                    <p>{{dr_detail.email ? dr_detail.email :'---'}}</p>
                                </div>

                                <div class="block-feilds" *ngIf="dr_detail.dob">
                                    <span>Date Of Birth</span>
                                    <p *ngIf="dr_detail.dob != '0000-00-00'">{{dr_detail.dob | date}}</p>
                                    <p *ngIf="dr_detail.dob == '0000-00-00'">---</p>
                                </div>
                                <div class="block-feilds" *ngIf="dr_detail.date_of_wedding">
                                    <span>Date Of Wedding</span>
                                    <p *ngIf="dr_detail.date_of_wedding != '0000-00-00'">{{dr_detail.date_of_wedding |
                                        date}}</p>
                                    <p *ngIf="dr_detail.date_of_wedding == '0000-00-00'">---</p>
                                </div>

                                <div class="block-feilds" *ngIf="dr_detail.doa">
                                    <span>Date Of Work Anniversary</span>
                                    <p *ngIf="dr_detail.doa != '0000-00-00'">{{dr_detail.doa | date}}</p>
                                    <p *ngIf="dr_detail.doa == '0000-00-00'">---</p>
                                </div>

                                <div class="block-feilds">
                                    <span>GST Number</span>
                                    <p>{{dr_detail.gst ? dr_detail.gst :'---'}}</p>
                                </div>

                                <div class="block-feilds">
                                    <span>PAN Number</span>
                                    <p>{{dr_detail.pan_no ? dr_detail.pan_no :'---'}}</p>
                                </div>

                                <div class="block-feilds">
                                    <span>Status</span>
                                    <p>{{dr_detail.status == '1' ? 'Active' : 'Deactive'}}</p>
                                </div>
                                <div class="block-feilds"
                                    *ngIf="logined_user_data.organisation_data.home_page_sfa == 'Default' && logined_user_data.organisation_data.sfa == '1'">
                                    <span>Assigned Territory</span>
                                    <p><strong>{{dr_detail.beat_code ? dr_detail.beat_code :'---'}}</strong>
                                        {{dr_detail.beat_code_area ? dr_detail.beat_code_area : '---'}}</p>
                                </div>

                                <div class="block-feilds"
                                    *ngIf="logined_user_data.organisation_data.home_page_sfa == 'Default' && logined_user_data.organisation_data.sfa == '1' && dr_detail.transport">
                                    <span>Transport</span>
                                    <p>{{dr_detail.transport ? dr_detail.transport : '---'}}</p>
                                </div>
                                <ng-container
                                    *ngIf="(logined_user_data.organisation_data.home_page_sfa == 'Default' || logined_user_data.organisation_data.home_page_dms == 'Default')">
                                    <div class="block-feilds">
                                        <span>First Mobile App Login</span>
                                        <p>
                                            {{dr_detail.first_login && dr_detail.first_login != '0000-00-00 00:00:00'?
                                            (dr_detail.first_login | date:'MMM d, y, h:mm:a') : '--'}}
                                        </p>
                                    </div>
                                    <div class="block-feilds">
                                        <span>Latest Mobile App Login</span>
                                        <p>
                                            {{dr_detail.latest_login && dr_detail.latest_login != '0000-00-00 00:00:00'?
                                            (dr_detail.latest_login | date:'MMM d, y, h:mm:a') : '--'}}
                                        </p>
                                    </div>
                                </ng-container>

                                <!-- <div class="block-feilds" *ngIf="user_type != 1">
                    <span>Primary Customer Detail</span>
                    <p>{{dr_detail.assign_distributors_company_name | titlecase}} - {{dr_detail.assign_distributors_mobile_no}}</p>
                    <p *ngIf="!dr_detail.assign_distributors_company_name && !dr_detail.assign_distributors_mobile_no">---</p>
                </div> -->

                                <div class="block-feilds">
                                    <span>Last Updated By</span>
                                    <p>{{dr_detail.last_updated_by_name ? dr_detail.last_updated_by_name : '--'}}
                                    </p>
                                </div>

                                <div class="block-feilds">
                                    <span>Last Updated On</span>
                                    <p>{{dr_detail.last_updated_on!='0000-00-00 00:00:00'? (dr_detail.last_updated_on |
                                        date:'d MMM y, h:mm a'):'--'}}
                                    </p>
                                </div>
                                <div class="block-feilds" *ngIf="user_type == 1">
                                    <span>User Name</span>
                                    <p>{{dr_detail.username ? dr_detail.username : '--'}}</p>
                                    <div class="copy-clipboard">
                                        <button mat-button (click)="copyAddress(dr_detail.username)">
                                            <i class="material-icons">content_copy</i>Copy
                                        </button>
                                    </div>
                                </div>
                                <div class="block-feilds" *ngIf="user_type == 1">
                                    <span>Password</span>
                                    <p>{{dr_detail.password ? dr_detail.password : '--'}}</p>
                                    <div class="copy-clipboard">
                                        <button mat-button (click)="copyAddress(dr_detail.password)">
                                            <i class="material-icons">content_copy</i>Copy
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="grid-box single mt16" *ngIf="dr_detail.brand && dr_detail.brand!=''">
                                <div class="block-feilds">
                                    <span>Brand</span>
                                    <p>{{dr_detail.brand?dr_detail.brand:''}}</p>
                                </div>
                            </div>
                            <div class="grid-box single mt16">
                                <div class="block-feilds">
                                    <span>Address</span>
                                    <p>{{dr_detail.address?dr_detail.address+',':''}}
                                        {{dr_detail.city?dr_detail.city+',':''}}
                                        {{ dr_detail.district ? (dr_detail.district | titlecase) + ',' : '' }}
                                        {{ dr_detail.state ? (dr_detail.state | titlecase) + ',' : '' }}
                                        {{dr_detail.pincode?dr_detail.pincode+',':''}} </p>


                                    <p *ngFor="let row of dr_detail.multiple_address let i = index">
                                        {{i+1}}.
                                        {{row.address?row.address+',':''}}
                                        {{row.city?row.city+',':''}}
                                        {{ row.district ? (row.district | titlecase) + ',' : '' }}
                                        {{ row.state ? (row.state | titlecase) + ',' : '' }}
                                        {{row.pincode?row.pincode+',':''}} </p>

                                </div>
                            </div>


                            <ng-container
                                *ngIf="dr_detail.type == 3 && (this.logined_user_data?.organisation_data?.sfa==1 || this.logined_user_data?.organisation_data?.dms==1)">
                                <!-- ------------Document Details Start------------- -->
                                <ng-container>
                                    <div class="card-head mt15">
                                        <h2>Document Details</h2>
                                    </div>
                                    <div class="card-body">
                                        <div class="grid-box">
                                            <div class="block-feilds">
                                                <div class="doc-img">
                                                    <img src="assets/img/no_image.png" *ngIf="dr_detail.pan_img == ''">
                                                    <img *ngIf="dr_detail.pan_img" src="{{url+dr_detail.pan_img}}"
                                                        (click)="goToImage(url+dr_detail.pan_img)"
                                                        style="cursor: zoom-in;">
                                                </div>
                                            </div>
                                            <div class="block-feilds">
                                                <span>Pan Number</span>
                                                <p>{{dr_detail.pan_no ?dr_detail.pan_no :'---'}}</p>
                                            </div>
                                            <div class="block-feilds">
                                                <div class="doc-img">
                                                    <img src="assets/img/no_image.png"
                                                        *ngIf="dr_detail.document_image == ''">
                                                    <img *ngIf="dr_detail.document_image"
                                                        src="{{url+dr_detail.document_image}}"
                                                        (click)="goToImage(url+dr_detail.document_image)"
                                                        style="cursor: zoom-in;">
                                                    <img src="assets/img/no_image.png"
                                                        *ngIf="dr_detail.document_image_back == ''">
                                                    <img *ngIf="dr_detail.document_image_back"
                                                        src="{{url+dr_detail.document_image_back}}"
                                                        (click)="goToImage(url+dr_detail.document_image_back)"
                                                        style="cursor: zoom-in;">
                                                </div>
                                            </div>
                                            <div class="block-feilds">
                                                <span>Document Number</span>
                                                <p>{{dr_detail.adhar_no ? dr_detail.adhar_no : '---'}}</p>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>
                                <!-- ------------Document Details End------------- -->

                                <!-- ------------Bank Details Start------------- -->
                                <ng-container>
                                    <div class="card-head mt15">
                                        <h2>Bank Details</h2>
                                    </div>

                                    <div class="card-body">
                                        <div class="grid-box">
                                            <div class="block-feilds">
                                                <span>User Redeemption Preference</span>
                                                <p>{{dr_detail.user_redeemption_prefrence ?
                                                    dr_detail.user_redeemption_prefrence :'---'}}</p>
                                            </div>
                                            <ng-container *ngIf="dr_detail.user_redeemption_prefrence == 'Bank'">

                                                <div class="block-feilds">
                                                    <span>Bank Name</span>
                                                    <p>{{dr_detail.bank_name ? dr_detail.bank_name :'---'}}</p>
                                                </div>

                                                <div class="block-feilds">
                                                    <span>Account Number</span>
                                                    <p>{{dr_detail.account_no ? dr_detail.account_no:'---'}}</p>
                                                </div>

                                                <div class="block-feilds">
                                                    <span>IFSC Code</span>
                                                    <p>{{dr_detail.ifsc_code ? dr_detail.ifsc_code :'---'}}</p>
                                                </div>

                                                <div class="block-feilds">
                                                    <div class="doc-img">
                                                        <img src="assets/img/no_image.png"
                                                            *ngIf="dr_detail.bank_img == ''">
                                                        <img *ngIf="dr_detail.bank_img" src="{{url+dr_detail.bank_img}}"
                                                            (click)="goToImage(url+dr_detail.bank_img)"
                                                            style="cursor: zoom-in;">
                                                    </div>
                                                </div>

                                                <div class="block-feilds">
                                                    <span>Account Holder Name</span>
                                                    <p>{{dr_detail.account_holder_name ? dr_detail.account_holder_name
                                                        :'---'}}
                                                    </p>
                                                </div>
                                            </ng-container>
                                            <ng-container *ngIf="dr_detail.user_redeemption_prefrence == 'UPI'">
                                                <div class="grid-box">
                                                    <div class="block-feilds">
                                                        <span>UPI ID</span>
                                                        <p>{{dr_detail.upi_id ? dr_detail.upi_id :'---'}}</p>
                                                    </div>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>

                                    <div class="card-body">
                                        <div class="grid-box">
                                            <div class="block-feilds">
                                                <span>KYC Status</span>
                                                <p class="{{dr_detail.kyc_status}}">{{dr_detail.kyc_status ?
                                                    dr_detail.kyc_status :'Pending'}}</p>
                                            </div>

                                            <div class="left-auto" *ngIf="dr_detail.kyc_status != 'Verified'">
                                                <button matTooltip="Update KYC Status"
                                                    (click)="updateKycStatus(dr_detail.id)" mat-raised-button
                                                    color="primary">Update KYC Status</button>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>
                            </ng-container>
                            <!-- ------------Bank Details End------------- -->

                        </div>
                    </div>

                    <ng-container *ngIf="!skLoading">
                        <div class="card mt16" *ngIf="dr_detail.form_builder.length > 0">
                            <div class="card-head">
                                <h2>Additional Details</h2>
                            </div>
                            <div class="card-body">
                                <div class="grid-box">
                                    <ng-container *ngFor="let row of dr_detail.form_builder">
                                        <div class="block-feilds" *ngIf="row.value && row.field_type != 'File'">
                                            <span>{{row.field_placeholder ? (row.field_placeholder | titlecase) :
                                                ''}}</span>
                                            <p>{{row.value ? row.value : ''}}</p>
                                        </div>
                                    </ng-container>
                                    <ng-container *ngFor="let row of dr_detail.form_builder_dependent">
                                        <div class="block-feilds" *ngIf="row.value">
                                            <span>{{row.field_placeholder ? (row.field_placeholder | titlecase) :
                                                ''}}</span>
                                            <p>{{row.value ? row.value : ''}}</p>
                                        </div>
                                    </ng-container>
                                </div>


                                <div class="img-container">
                                    <ng-container *ngFor="let row of dr_detail.form_builder">
                                        <div class="image-block mt10" *ngIf="row.value && row.field_type == 'File'">
                                            <img [src]="service.attachmentUrl+row.value"
                                                (click)="goToImage(service.attachmentUrl+row.value)"
                                                style="cursor: zoom-in;">
                                            <p>{{row.field_placeholder ? (row.field_placeholder | titlecase) : ''}}</p>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                    </ng-container>


                    <div class="card" *ngIf="skLoading">
                        <div class="sk-head">
                            <h2>&nbsp;</h2>
                        </div>
                        <div class="card-body">
                            <div class="grid-box">
                                <div class="sk-box" *ngFor="let row of [].constructor(10)">
                                    &nbsp;
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt10">
                        <div class="col s12 m6 l6">
                            <ng-container
                                *ngIf="paramsTab!='Lead' && !skLoading && (login_data.organisation_data.dms== '1')">
                                <div class="card mb10" *ngIf="user_type == '1'">
                                    <div class="card-head afs">
                                        <h2>Payment Information</h2>
                                    </div>
                                    <div class="card-body">
                                        <div class="grid-box two">
                                            <div class="block-feilds">
                                                <span>Credit Limit</span>
                                                <p>&#x20B9; {{dr_detail.credit_limit ? dr_detail.credit_limit : 0}}</p>
                                            </div>
                                            <div class="block-feilds">
                                                <span>Credit Day's</span>
                                                <p>{{dr_detail.credit_period ? dr_detail.credit_period : 0}}</p>
                                            </div>
                                            <div class="block-feilds" *ngIf="dr_detail.type != 3">
                                                <span>Open Order</span>
                                                <p>{{dr_detail.open_order ? dr_detail.open_order : 0}}</p>
                                            </div>
                                        </div>

                                        <div class="grid-box two mt10">
                                            <div class="block-feilds approved">
                                                <span>Outstanding</span>
                                                <p>&#x20B9; {{dr_detail.outstanding_balance ?
                                                    dr_detail.outstanding_balance : 0}}</p>
                                            </div>
                                            <div class="block-feilds reject">
                                                <span>Overdue</span>
                                                <p>&#x20B9; {{dr_detail.overdue_balance ? dr_detail.overdue_balance :
                                                    0}}</p>
                                            </div>
                                        </div>
                                        <!-- *ngIf="login_data.organisation_data.dms== '1'" -->
                                        <div class="row mb0">
                                            <div class="col s12">
                                                <div class="cs-table pt10">
                                                    <div class="table-container padding0">
                                                        <div class="table-content none-shadow">
                                                            <table>
                                                                <tr
                                                                    *ngFor="let row of payment_lower_info; let i = index">
                                                                    <td class="w100  text-center primary-bg">
                                                                        {{row.days}}
                                                                        Day's</td>
                                                                    <td><strong>&#x20B9; {{row.value}}</strong></td>
                                                                    <td class="w75  yellow-bgclr"
                                                                        [ngClass]="row.payment_slab == 'OVERDUE' ? 'yellow-bg' : 'red-bg'">
                                                                        {{row.payment_slab}}
                                                                    </td>
                                                                    <td class="w50"><a
                                                                            (click)="viewInvoice(row.start_date, row.end_date)"
                                                                            class="link-btn">View</a></td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </ng-container>
                            <div class="card pb0"
                                *ngIf="this.logined_user_data?.organisation_data?.sfa==1 && (activeAcc?.parent_id==0||login_data?.user_type!='DMS')">
                                <div class="card-head">
                                    <h2>Assigned Sales User</h2>
                                    <div class="left-auto"
                                        *ngIf="(login_data.edit_primary_network=='1') || (login_data.edit_secondary_network=='1') ||  (user_type == '1' && login_data.edit_channel_partner=='1')|| (user_type == '3' && login_data.edit_dealer=='1') || (user_type == '7' && login_data.edit_direct_dealers=='1')">
                                        <a class="sm-mat-icon-button" mat-icon-button matTooltip="Update Sales User"
                                            (click)="openDialog('assignSales')">
                                            <i class="material-icons">edit</i>
                                        </a>
                                    </div>
                                </div>

                                <div class="card-body pt0">
                                    <mat-list class="cs-list-box pt0">
                                        <mat-list-item *ngFor="let row of assign_sales_user;">
                                            <div class="alphabet">{{row.name ? row.name[0].toUpperCase():'' }}</div>
                                            {{row.name | titlecase}}
                                            <strong *ngIf="row.employee_id">&nbsp; &nbsp;({{row.employee_id}})</strong>
                                        </mat-list-item>
                                    </mat-list>
                                </div>
                            </div>
                            <ng-container *ngIf="dr_detail?.document && dr_detail?.document.length>0">
                                <p class="imageheader">Uploaded Images</p>
                                <div class="card-body" style="overflow: auto;">
                                    <div class="grid-box">
                                        <div class="block-feilds">
                                            <div class="doc-img">
                                                <div *ngFor="let row of dr_detail.document">
                                                    <img src="{{img_url+row.img}}" (click)="goToImage(img_url+row.img)"
                                                        style="cursor: zoom-in;">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </ng-container>


                            <div class="card mt10"
                                *ngIf="(activeAcc?.parent_id==0||login_data?.user_type!='DMS') && user_type != 1 && (logined_user_data.organisation_data.home_page_sfa == 'Default' || logined_user_data.organisation_data.home_page_dms == 'Default')">
                                <div class="card-head">
                                    <h2>Assigned Primary</h2>
                                    <div class="left-auto"
                                        *ngIf="(login_data.edit_primary_network=='1') || (login_data.edit_secondary_network=='1') ||  (user_type == '1' && login_data.edit_channel_partner=='1')|| (user_type == '3' && login_data.edit_dealer=='1') || (user_type == '7' && login_data.edit_direct_dealers=='1')">
                                        <a class="sm-mat-icon-button" mat-icon-button matTooltip="Update Sales User"
                                            (click)="openDialog('assignDist')">
                                            <i class="material-icons">edit</i>
                                        </a>
                                    </div>
                                </div>
                                <div class="card-body pt0">
                                    <mat-list class="cs-list-box pt0">
                                        <mat-list-item *ngFor="let row of distributors">
                                            <div class="alphabet">
                                                {{row?.company_name ? row?.company_name[0].toUpperCase():'' }}
                                            </div>{{row?.company_name | titlecase}}
                                            <strong>&nbsp; &nbsp;({{row.mobile}})</strong>
                                        </mat-list-item>
                                    </mat-list>
                                </div>
                            </div>

                        </div>

                        <div class="col s12 m6 l6"
                            *ngIf="(activeAcc?.parent_id==0||login_data?.user_type!='DMS') && (logined_user_data.organisation_data.home_page_sfa == 'Default' || logined_user_data.organisation_data.home_page_dms == 'Default')">
                            <div class="card mb10">
                                <div class="card-head afs">
                                    <h2>Point Location</h2>
                                    <div class="left-auto"
                                        *ngIf="(login_data.edit_primary_network=='1') || (login_data.edit_secondary_network=='1') ||  (user_type == '1' && login_data.edit_channel_partner=='1')|| (user_type == '3' && login_data.edit_dealer=='1') || (user_type == '7' && login_data.edit_direct_dealers=='1')">
                                        <button matTooltip="Update Location" mat-raised-button color="primary"
                                            (click)="update_google_location('India',dr_detail.state,dr_detail.district,dr_detail.city,dr_detail.pincode,dr_detail.address,'updateGoogleLocation')">Update
                                            Location</button>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div id="map" style="width: 100%; height: 400px;"></div>
                                    <div class="grid-box two mt10">
                                        <div class="block-feilds">
                                            <span>Latitude</span>
                                            <p>{{latitude ? latitude : '---'}}</p>
                                        </div>
                                        <div class="block-feilds">
                                            <span>Longitude</span>
                                            <p>{{longitude ? longitude : '---'}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>



                    </div>
                </div>


                <div class="col s12 m4 l4"
                    *ngIf="(activeAcc?.parent_id==0||login_data?.user_type!='DMS') && paramsTab!='Lead' && logined_user_data?.organisation_data?.sfa==1 && (logined_user_data.organisation_data.home_page_sfa == 'Default' || logined_user_data.organisation_data.home_page_dms == 'Default')">

                    <div [hidden]="hide_bar_chart" class="card mb10"
                        *ngIf="!skLoading && (user_type == 1 || user_type == 7)">
                        <div class="card-head">
                            <h2>Target V/S Achievement ({{target_month}})</h2>
                        </div>
                        <canvas #barCanvas></canvas>
                    </div>

                    <div [hidden]="hide_line_chart" class="card" *ngIf="!skLoading">
                        <div class="card-head">
                            <h2>Sales Graph Last 6 Month {{salesMonth}}</h2>
                        </div>
                        <canvas #lineCanvas></canvas>
                    </div>

                    <div class="card" *ngIf="skLoading">
                        <div class="sk-head">
                            <h2>&nbsp;</h2>
                        </div>
                        <div class="card-body">
                            <div class="grid-box single mt10" *ngFor="let row of [].constructor(5)">
                                <div class="sk-box">
                                    &nbsp;
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </ng-container>

        <div *ngIf="tabType== 'Checkin'" style="margin: -10px -10px 0px -10px;">
            <div class="cs-table">
                <div class="left-auto jfe df flex-gap-10">

                    <ng-container *ngIf="filter.date_from">
                        <div class="filteDate">
                            <span>Date From</span>
                            <h3>{{filter?.date_from | date:'dd MMM, yyyy'}}</h3>
                        </div>
                        <div class="filteDate">
                            <span>Date To</span>
                            <h3>{{filter?.date_to | date:'dd MMM, yyyy'}}</h3>
                        </div>
                    </ng-container>

                    <a mat-icon-button matTooltip="Refresh" (click)="refresh(tabType)">
                        <i class="material-icons">refresh</i>
                    </a>

                    <div class="pagination" *ngIf="checkinData.length > 0">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('checkin')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('checkin')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w60">S.no.</th>
                                <th class="w110">Date Created

                                    <div class="sorting">
                                        <a (click)="openBottomSheet()" matTooltip="Date Filter">
                                            <i class="material-icons">filter_alt</i>
                                        </a>
                                    </div>
                                </th>
                                <th class="w100" *ngIf="login_data.user_type!='DMS'">
                                    {{login_data.user_type!='DMS'?'Employee Code':'Code'}}</th>
                                <th class="w180">Employee Name</th>
                                <th class="w180" *ngIf="login_data.user_type=='DMS'">Dealer Name</th>

                                <th class="w150" *ngIf="login_data.user_type!='DMS'">Reporting Manager </th>
                                <!-- <th class="w180">Company Name</th> -->
                                <!-- <th>Address</th> -->
                                <th class="w100">Check in</th>
                                <th class="w100">Check out</th>
                                <th class="w100">Total Time Spend</th>
                                <th>Remark</th>
                            </tr>
                        </table>
                    </div>

                    <div class="table-head border-top">
                        <table>
                            <tr>
                                <th class="w60">&nbsp;</th>
                                <th class="w110">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="cs-input date-column infix-bodr">
                                            <input matInput [matDatepicker]="picker" placeholder="Date"
                                                name="date_created" [(ngModel)]="filter.date_created"
                                                (dateChange)="date_format(tabType)" [max]="today_date" disabled>
                                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker disabled="false"></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w100" *ngIf="login_data.user_type!='DMS'">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="emp_code"
                                                [(ngModel)]="filter.emp_code"
                                                (keyup.enter)="!filter.emp_code ? refresh(tabType) : getCheckin()">
                                        </mat-form-field>
                                    </div>
                                </th>

                                <th class="w180">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="emp_name"
                                                [(ngModel)]="filter.emp_name"
                                                (keyup.enter)="!filter.emp_name ? refresh(tabType) : getCheckin()">
                                        </mat-form-field>
                                    </div>
                                </th>

                                <th class="w180" *ngIf="login_data.user_type=='DMS'">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="company_name"
                                                [(ngModel)]="filter.company_name"
                                                (keyup.enter)="!filter.company_name ? refresh(tabType) : getCheckin()">
                                        </mat-form-field>
                                    </div>
                                </th>

                                <th class="w150" *ngIf="login_data.user_type!='DMS'">
                                    <!-- <div class="th-search-acmt">
                            <mat-form-field class="example-full-width cs-input select-input">
                                <input matInput placeholder="Search..." type="text" name="reporting_manager"
                                [(ngModel)]="filter.reporting_manager"
                                (keyup.enter)="!filter.reporting_manager ? refresh(tabType) : getCheckin()">
                            </mat-form-field>
                        </div> -->
                                </th>
                                <th class="w100">&nbsp;</th>
                                <th class="w100">&nbsp;</th>
                                <th class="w100">
                                    {{totalCheckinTime ? totalCheckinTime : ''}}
                                </th>
                                <th>&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>


                <div class="table-container" *ngIf="checkinData.length > 0">
                    <div class="table-content">
                        <table>
                            <ng-container *ngIf="!checkinLoader">
                                <tr *ngFor="let row of checkinData; let i =index">
                                    <td class="w60">{{i+1+sr_no}}</td>
                                    <td class="w110">{{row.date_created | date : 'd MMM y'}}</td>
                                    <td class="w100" *ngIf="login_data.user_type!='DMS'">{{row.employee_id}}</td>
                                    <td class="w180">{{row.exec_name | titlecase}}</td>
                                    <td class="w180" *ngIf="login_data.user_type=='DMS'">{{row?.company_name |
                                        titlecase}}</td>
                                    <td class="w150" *ngIf="login_data.user_type!='DMS'">{{row.reporting_manager_name |
                                        titlecase}}</td>
                                    <td class="w100">
                                        <ng-container
                                            *ngIf="row.visit_start == '0000-00-00 00:00:00'">---</ng-container>
                                        <ng-container
                                            *ngIf="row.visit_start != '0000-00-00 00:00:00'">{{row.visit_start|
                                            date:'h:mm a'}}</ng-container>
                                    </td>
                                    <td class="w100">
                                        <ng-container *ngIf="row.visit_end == '0000-00-00 00:00:00'">---</ng-container>
                                        <ng-container *ngIf="row.visit_end != '0000-00-00 00:00:00'">{{row.visit_end |
                                            date:'h:mm a'}}</ng-container>
                                    </td>
                                    <td class="w100">{{row.total_time_spend}}</td>
                                    <td>{{row.remark}}</td>
                                </tr>
                            </ng-container>

                            <ng-container *ngIf="checkinLoader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w60">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w110">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W100 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W100 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W100 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td>&nbsp;</td>
                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
                <ng-container *ngIf="checkinData.length == 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>
        </div>


        <div *ngIf="tabType== 'Segment'" style="margin: -10px -10px 0px -10px;">
            <div class="cs-table">
                <div class="left-auto df jfe flex-gap-10">
                    <a mat-icon-button matTooltip="Refresh" (click)="refresh(tabType)">
                        <i class="material-icons">refresh</i>
                    </a>
                    <div class="pagination" *ngIf="segment.length > 0">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('segment')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('segment')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w50">S.No</th>
                                <th>Category</th>
                                <th class="w200  text-center">Default Discount (%)</th>
                                <th class="w200  text-center">Customize Discount (%)</th>
                                <th class="w140" *ngIf="login_data.organisation_data.additional_discount == '1'">
                                    Additional Discountss</th>
                            </tr>
                        </table>
                    </div>
                    <div class="table-head border-top">
                        <table>
                            <tr>
                                <th class="w50">&nbsp;</th>
                                <th>
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="segment"
                                                [(ngModel)]="filter.segment"
                                                (keyup.enter)="!filter.segment ? refresh(tabType) : getSegment()">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w200">&nbsp;</th>
                                <th class="w200">&nbsp;</th>
                                <th class="w140" *ngIf="login_data.organisation_data.additional_discount == '1'">&nbsp;
                                </th>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="table-container" *ngIf="segment.length > 0">
                    <div class="table-content">
                        <table>
                            <ng-container *ngIf="!segmentLoader">
                                <tr *ngFor="let row of segment; let i = index">
                                    <td class="w50">{{i+1+sr_no}}</td>
                                    <td>{{row.category}}</td>
                                    <td *ngIf="user_type == 1" class="w200 text-center">{{row.distributor_discount}}
                                    </td>
                                    <td *ngIf="user_type == 7" class="w200 text-center">{{row.direct_dealer_discount}}
                                    </td>
                                    <td class="w200  text-center">
                                        <ng-container *ngIf="discountFlag == true">
                                            <div class="th-search-acmt mr30">
                                                <mat-form-field>
                                                    <input type="number" matInput class="text-right" placeholder="Enter"
                                                        name="discount{{i}}" #discount="ngModel"
                                                        [(ngModel)]="row.discount">
                                                </mat-form-field>
                                            </div>
                                            <div class="action-button text-right">
                                                <a mat-icon-button matTooltip="Save" (click)="UpdateDiscount(row)">
                                                    <i class="material-icons edit">save</i>
                                                </a>
                                            </div>
                                        </ng-container>

                                        <ng-container *ngIf="discountFlag == false">
                                            {{row.discount}}
                                            <div class="action-button text-right"
                                                *ngIf="(login_data.edit_primary_network=='1') || (login_data.edit_secondary_network=='1') ||  (user_type == '1' && login_data.edit_channel_partner=='1')|| (user_type == '3' && login_data.edit_dealer=='1') || (user_type == '7' && login_data.edit_direct_dealers=='1')">
                                                <a mat-icon-button matTooltip="Discount Edit" (click)="discountEdit()">
                                                    <i class="material-icons edit">edit</i>
                                                </a>
                                            </div>
                                        </ng-container>
                                    </td>
                                    <td class="w140" *ngIf="login_data.organisation_data.additional_discount == '1'">
                                        <button mat-button class="link-btn"
                                            [disabled]="row.additional_discount.length === 0"
                                            (click)="discountDialog(row.id,row.category, row.additional_discount)">View
                                            Discount</button>
                                    </td>
                                </tr>
                            </ng-container>
                            <ng-container *ngIf="segmentLoader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w50">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td>
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w200 ">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w200 text-right">
                                        <div>&nbsp;</div>
                                    </td>

                                    <td class="w140" *ngIf="login_data.organisation_data.additional_discount == '1'">
                                        <div>&nbsp;</div>
                                    </td>

                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>


                <ng-container *ngIf="segment.length == 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>
        </div>

        <div *ngIf="tabType== 'Product'" style="margin: -10px -10px 0px -10px;">
            <div class="cs-table">
                <div class="left-auto df jfe flex-gap-10">
                    <a mat-icon-button matTooltip="Refresh" (click)="refresh(tabType)">
                        <i class="material-icons">refresh</i>
                    </a>
                    <div class="pagination" *ngIf="productList.length > 0">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('Product')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('Product')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w50">S.No</th>
                                <th class="w150">Category</th>
                                <th class="w150">Sub Category</th>
                                <th>Product Name</th>
                                <th class="w120">Product Code</th>
                                <th class="w80 text-right">Mrp</th>
                                <th class="w100 text-right">Net Price</th>
                                <th class="w100 text-right">Customize Net Price</th>
                            </tr>
                        </table>
                    </div>
                    <div class="table-head border-top">
                        <table>
                            <tr>
                                <th class="w50">&nbsp;</th>
                                <th class="w150">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="category"
                                                [(ngModel)]="filter.category"
                                                (keyup.enter)="!filter.category ? refresh(tabType) : getProducts()">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w150">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="sub_category_name"
                                                [(ngModel)]="filter.sub_category_name"
                                                (keyup.enter)="!filter.sub_category_name ? refresh(tabType) : getProducts()">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th>
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="product_name"
                                                [(ngModel)]="filter.product_name"
                                                (keyup.enter)="!filter.product_name ? refresh(tabType) : getProducts()">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w120">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="product_code"
                                                [(ngModel)]="filter.product_code"
                                                (keyup.enter)="!filter.product_code ? refresh(tabType) : getProducts()">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w80 text-right">&nbsp;</th>
                                <th class="w100 text-right">&nbsp;</th>
                                <th class="w100 text-right">&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="table-container" *ngIf="productList.length > 0">
                    <div class="table-content">
                        <table>
                            <ng-container *ngIf="!segmentLoader">
                                <tr *ngFor="let row of productList; let i = index">
                                    <td class="w50">{{i+1+sr_no}}</td>
                                    <td class="w150">{{row.category ? (row.category) : '---'}}</td>
                                    <td class="w150">{{row.sub_category_name ? (row.sub_category_name) : '---'}}</td>
                                    <td>{{row.product_name ? (row.product_name) : '---'}}</td>
                                    <td class="w120">{{row.product_code ? (row.product_code) : '---'}}</td>
                                    <td class="w80 text-right">{{row.mrp ? ('₹' + row.mrp) : '0'}}</td>
                                    <td class="w100 text-right">{{row.net_price ? ('₹' + row.net_price) : '0'}}</td>
                                    <td class="w100 text-center">
                                        <ng-container *ngIf="discountFlag == true">
                                            <div class="th-search-acmt mr30">
                                                <mat-form-field>
                                                    <input type="number" matInput class="text-right" placeholder="Enter"
                                                        name="dr_net_price{{i}}" #dr_net_price="ngModel"
                                                        [(ngModel)]="row.dr_net_price">
                                                </mat-form-field>
                                            </div>
                                            <div class="action-button text-right">
                                                <a mat-icon-button matTooltip="Save" (click)="UpdateNetPrice(row)">
                                                    <i class="material-icons edit">save</i>
                                                </a>
                                            </div>
                                        </ng-container>

                                        <ng-container *ngIf="discountFlag == false">
                                            {{row.dr_net_price ? ( '₹' +row.dr_net_price) : '0'}}
                                            <div class="action-button text-right"
                                                *ngIf="(login_data.edit_primary_network=='1')">
                                                <a mat-icon-button matTooltip="Discount Edit"
                                                    (click)="discountFlag = true">
                                                    <i class="material-icons edit">edit</i>
                                                </a>
                                            </div>
                                        </ng-container>
                                    </td>
                                </tr>
                            </ng-container>
                            <ng-container *ngIf="segmentLoader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w50">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td>
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w120">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w80 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>


                <ng-container *ngIf="productList.length == 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>
        </div>

        <div *ngIf="tabType== 'Primary Order'" style="margin: -10px -10px 0px -10px;">
            <div class="tab-surface">
                <button *ngFor="let row of calenderInfo; let i =index;" mat-button
                    [ngClass]="OrderMonth == row.month && OrderYear == row.year ? 'active' : ''"
                    (click)="getPrimaryOrder('',row.month,row.year, orderStatus);">{{row.month_name}} {{row.year}}
                    <span class="order-value" *ngIf="login_data?.organisation_data?.order_place==0">&#x20B9; {{row.sale
                        ? (row.sale | number:'1.1-2') : '0'}}</span>
                </button>
            </div>

            <div class="tools-container no-sticky">
                <h2>Primary Order : {{primary_order_list.length ? primary_order_list.length : '0'}}</h2>
                <div class="left-auto df ac flex-gap-10">
                    <a mat-icon-button matTooltip="Refresh" (click)="refresh(tabType)">
                        <i class="material-icons">refresh</i>
                    </a>

                    <div class="pagination" *ngIf="primary_order_list.length > 0">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('primary')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('primary')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>
                    <div class="left-auto df" style="overflow: auto;">
                        <div class="mat-tabbar df">
                            <button mat-button [ngClass]="orderStatus == 'Pending' ? 'active' : ''"
                                (click)="orderStatus = 'Pending';getPrimaryOrder('',OrderMonth,OrderYear,orderStatus);">
                                Pending ({{primary__count.Pending}})
                            </button>
                            <button mat-button [ngClass]="orderStatus == 'Approved' ? 'active' : ''"
                                (click)="orderStatus = 'Approved';getPrimaryOrder('',OrderMonth,OrderYear,orderStatus);">
                                Approved ({{primary__count.Approved}})
                            </button>
                            <button mat-button [ngClass]="orderStatus == 'Reject' ? 'active' : ''"
                                (click)="orderStatus = 'Reject';getPrimaryOrder('',OrderMonth,OrderYear,orderStatus);">
                                Reject ({{primary__count.Reject}})
                            </button>
                            <button mat-button [ngClass]="orderStatus == 'Hold' ? 'active' : ''"
                                (click)="orderStatus = 'Hold';getPrimaryOrder('',OrderMonth,OrderYear,orderStatus);">
                                Hold ({{primary__count.Hold}})
                            </button>

                            <ng-container *ngIf="login_data.organisation_data.dispatch == '1'">

                                <button mat-button [ngClass]="orderStatus == 'dispatchPlanning' ? 'active' : ''"
                                    (click)="orderStatus = 'dispatchPlanning';getPrimaryOrder('',OrderMonth,OrderYear,orderStatus);">
                                    Dispatch Planning
                                    ({{primary__count.dispatchPlanning}})
                                </button>

                                <button mat-button [ngClass]="orderStatus == 'partialDispatched' ? 'active' : ''"
                                    (click)="orderStatus = 'partialDispatched';getPrimaryOrder('',OrderMonth,OrderYear,orderStatus);">
                                    Partially Planned
                                    ({{primary__count.partialDispatched}})
                                </button>


                                <button mat-button [ngClass]="orderStatus == 'completeDispatched' ? 'active' : ''"
                                    (click)="orderStatus = 'completeDispatched';getPrimaryOrder('',OrderMonth,OrderYear,orderStatus);">
                                    Complete Planned
                                    ({{primary__count.completeDispatched}})
                                </button>

                                <button mat-button [ngClass]="orderStatus == 'orderPartial' ? 'active' : ''"
                                    (click)="orderStatus = 'orderPartial';getPrimaryOrder('',OrderMonth,OrderYear,orderStatus);">
                                    Partially Dispatched
                                    ({{primary__count.orderPartial}})
                                </button>

                                <button mat-button [ngClass]="orderStatus == 'Dispatched' ? 'active' : ''"
                                    (click)="orderStatus = 'Dispatched';getPrimaryOrder('',OrderMonth,OrderYear,orderStatus);">
                                    Dispatched
                                    ({{primary__count.Dispatched}})
                                </button>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
            <div class="cs-table">
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w50">S NO</th>
                                <th class="w110">Date</th>
                                <th class="w110">Created By</th>
                                <th class="w80">Order Id</th>
                                <th class="w110" *ngIf="orderStatus == 'Approved' || orderStatus == 'Dispatch'">Order
                                    Number</th>
                                <th class="w80 text-center">Total Items</th>
                                <th class="w90 text-right">Item QTY.</th>
                                <th class="w90 text-right" *ngIf="orderStatus == 'Partial_Dispatch'">Dispatch QTY.</th>
                                <th class="w90 text-right" *ngIf="orderStatus == 'Partial_Dispatch'">Pending QTY.</th>
                                <th class="w90 text-right" *ngIf="login_data?.organisation_data?.order_place==0">Order
                                    Amount</th>
                                <th class="w200">Remark</th>
                                <th class="w200" *ngIf="orderStatus == 'Reject' || orderStatus == 'Draft'">Reason</th>
                            </tr>
                        </table>
                    </div>

                    <div class="table-head border-top">
                        <table>
                            <tr>
                                <th class="w50">&nbsp;</th>
                                <th class="w110">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="cs-input date-column infix-bodr">
                                            <input matInput [matDatepicker]="picker" placeholder="Date"
                                                name="date_created" [(ngModel)]="filter.date_created"
                                                (dateChange)="date_format(tabType)" [max]="today_date" disabled>
                                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker disabled="false"></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w110">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="created_by_name"
                                                [(ngModel)]="filter.created_by_name"
                                                (keyup.enter)="!filter.created_by_name ?  refresh(tabType) : getPrimaryOrder('',currentMonth_no,currentYear,orderStatus)">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w80">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="order_no"
                                                [(ngModel)]="filter.order_no"
                                                (keyup.enter)="!filter.order_no ?  refresh(tabType) : getPrimaryOrder('',currentMonth_no,currentYear,orderStatus)">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w110" *ngIf="orderStatus == 'Approved' || orderStatus == 'Dispatch'">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="account_order_no"
                                                [(ngModel)]="filter.account_order_no"
                                                (keyup.enter)="!filter.account_order_no ?  refresh(tabType) : getPrimaryOrder('',currentMonth_no,currentYear,orderStatus)">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w80">&nbsp;</th>
                                <th class="w90 text-center">&nbsp;</th>
                                <th class="w90 text-right" *ngIf="orderStatus == 'Partial_Dispatch'">&nbsp;</th>
                                <th class="w90 text-right" *ngIf="orderStatus == 'Partial_Dispatch'">&nbsp;</th>
                                <th class="w90 text-right" *ngIf="login_data?.organisation_data?.order_place==0">&nbsp;
                                </th>
                                <!-- <th class="w90 text-right">&nbsp;</th> -->
                                <th class="w200">&nbsp;</th>
                                <th class="w200" *ngIf="orderStatus == 'Reject' || orderStatus == 'Draft'">&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-content">
                        <table>
                            <ng-container *ngIf="!primaryLoader">
                                <tr *ngFor="let row of primary_order_list; let i =index;">
                                    <td class="w50">{{i+1+sr_no}}</td>
                                    <td class="w110">{{row.date_created | date : 'd MMM y , h:mm a' }}</td>
                                    <td class="w110">{{row.created_by_name}}</td>
                                    <td class="w80">
                                        <a class="link-btn" [routerLink]="[ 'order-detail/', row.encrypt_id ]"
                                            [queryParams]="{'id':row.encrypt_id, 'status':orderStatus}"
                                            routerLinkActive="active">{{row.order_no}}</a>
                                    </td>
                                    <td class="w110" *ngIf="orderStatus == 'Approved' || orderStatus == 'Dispatch'">
                                        {{row.account_order_no}}</td>
                                    <td class="w80 text-center">{{row.order_item}}</td>
                                    <td class="w90 text-right">{{row.total_order_qty}}</td>
                                    <td class="w90 text-right" *ngIf="orderStatus == 'Partial_Dispatch'">
                                        {{row.dispatch_qty}}</td>
                                    <td class="w90 text-right" *ngIf="orderStatus == 'Partial_Dispatch'">
                                        {{row.pending_qty}}</td>
                                    <td class="w90 text-right" *ngIf="login_data?.organisation_data?.order_place==0">
                                        <strong>&#x20B9; {{row.order_grand_total}}</strong>
                                    </td>
                                    <td class="w200">{{row.order_create_remark}}</td>
                                    <td class="w200" *ngIf="orderStatus == 'Reject' || orderStatus == 'Draft'">
                                        {{row.reason_reject}}</td>
                                </tr>
                            </ng-container>
                            <ng-container *ngIf="primaryLoader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(50)">
                                    <td class="w50">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w110">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w110">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w80">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td *ngIf="orderStatus == 'Approved' || orderStatus == 'Dispatch'" class="w110">
                                        <div>&nbsp;</div>
                                    </td>
                                    <!-- <td class="w180"><div>&nbsp;</div></td> -->
                                    <!-- <td><div>&nbsp;</div></td> -->
                                    <td class="W80 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W90 text-right" *ngIf="login_data?.organisation_data?.order_place==0">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td *ngIf="orderStatus == 'Partial_Dispatch'" class="W90 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td *ngIf="orderStatus == 'Partial_Dispatch'" class="W90 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W200 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td *ngIf="orderStatus == 'Reject' || orderStatus == 'Draft'"
                                        class="W200 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td>
                                        <div>&nbsp;</div>
                                    </td>
                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
                <ng-container *ngIf="primary_order_list.length <= 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>
            <div class="fab-btns" *ngIf="login_data.user_type=='DMS'">
                <button mat-fab class="pulse" color="primary"
                    [routerLink]="logined_user_data?.organisation_data?.order_place==0?'add-primary-order':'add-primary-order-qty'">
                    <i class="material-icons">add</i>
                    Add Order
                </button>
            </div>
        </div>

        <div *ngIf="tabType== 'Secondary Order'" style="margin: -10px -10px 0px -10px;">

            <div class="tab-surface">
                <button *ngFor="let row of Secondary_calenderInfo; let i =index;" mat-button
                    [ngClass]="SecOrderMonth == row.month && SecOrderYear == row.year ? 'active' : ''"
                    (click)="getSecondaryOrder('',row.month,row.year, orderStatus);">{{row.month_name}} {{row.year}}
                    <span class="order-value" *ngIf="login_data?.organisation_data?.order_place==0">&#x20B9; {{row.sale
                        ? (row.sale | number:'1.1-2') : '0'}}</span>
                </button>
            </div>

            <div class="tools-container no-sticky">
                <h2>Secondary Order : {{secondary_order_list.length ? secondary_order_list.length : '0'}}</h2>
                <div class="left-auto ac df flex-gap-10">
                    <a mat-icon-button matTooltip="Refresh" (click)="refresh(tabType)">
                        <i class="material-icons">refresh</i>
                    </a>

                    <div class="pagination" *ngIf="secondary_order_list.length > 0">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('secondary')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('secondary')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>
                    <div class="mat-tabbar">
                        <button mat-button [ngClass]="orderStatus == 'Pending' ? 'active' : ''"
                            (click)="orderStatus = 'Pending';getSecondaryOrder('',SecOrderMonth,SecOrderYear,orderStatus);">
                            <i class="material-icons">pending_actions</i>
                            Pending ({{secondary__count.Pending}})
                        </button>
                        <button mat-button [ngClass]="orderStatus == 'Approved' ? 'active' : ''"
                            (click)="orderStatus = 'Approved';getSecondaryOrder('',SecOrderMonth,SecOrderYear,orderStatus);">
                            <i class="material-icons">task_alt</i>
                            Approved ({{secondary__count.Approved}})
                        </button>
                        <button mat-button [ngClass]="orderStatus == 'Reject' ? 'active' : ''"
                            (click)="orderStatus = 'Reject';getSecondaryOrder('',SecOrderMonth,SecOrderYear,orderStatus);">
                            <i class="material-icons">unpublished</i>
                            Reject ({{secondary__count.Reject}})
                        </button>
                    </div>
                </div>
            </div>

            <div class="cs-table horizontal-scroll" style="width: 100%">
                <div class="sticky-head">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w50">S NO</th>
                                <th class="w110">Date</th>
                                <th class="w110">Created By</th>
                                <th class="w80">Order Id</th>
                                <th class="w200">Retailer Details</th>
                                <th class="w80 text-center">Total Items</th>
                                <th class="w90 text-right">Item QTY.</th>
                                <th class="w90 text-right" *ngIf="login_data?.organisation_data?.order_place==0">Order
                                    Amount</th>
                                <th class="w200">Remark</th>
                            </tr>
                        </table>
                    </div>

                    <div class="table-head border-top">
                        <table>
                            <tr>
                                <th class="w50">&nbsp;</th>
                                <th class="w110">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="cs-input date-column infix-bodr">
                                            <input matInput [matDatepicker]="picker" placeholder="Date"
                                                name="date_created" [(ngModel)]="filter.date_created"
                                                (dateChange)="date_format(tabType)" [max]="today_date" disabled>
                                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                            <mat-datepicker #picker disabled="false"></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w110">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="created_by"
                                                [(ngModel)]="filter.created_by"
                                                (keyup.enter)="!filter.created_by ?  refresh(tabType) : getSecondaryOrder('',currentMonth_no,currentYear, orderStatus)">
                                        </mat-form-field>

                                    </div>
                                </th>
                                <th class="w80">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="order_no"
                                                [(ngModel)]="filter.order_no"
                                                (keyup.enter)="!filter.order_no ?  refresh(tabType) : getSecondaryOrder('',currentMonth_no,currentYear, orderStatus)">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w200">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="company_name"
                                                [(ngModel)]="filter.company_name"
                                                (keyup.enter)="!filter.company_name ?  refresh(tabType) : getSecondaryOrder('',currentMonth_no,currentYear, orderStatus)">
                                        </mat-form-field>
                                    </div>
                                </th>


                                <th class="w80 text-center">&nbsp;</th>
                                <th class="w90 text-right">&nbsp;</th>
                                <th class="w90 text-right" *ngIf="login_data?.organisation_data?.order_place==0">&nbsp;
                                </th>
                                <th class="w200">&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-content">
                        <table>
                            <ng-container *ngIf="!secondaryLoader">
                                <tr *ngFor="let row of secondary_order_list; let i =index;">
                                    <td class="w50">{{i+1+sr_no}}</td>
                                    <td class="w110">{{row.date_created | date : 'd MMM y , h:mm a' }}</td>
                                    <td class="w110">{{row.created_by_name}}</td>
                                    <td class="w80">
                                        <a class="link-btn" [routerLink]="['secondary-order-detail/', row.encrypt_id ]"
                                            [queryParams]="{'id':row.encrypt_id, 'status':orderStatus}"
                                            routerLinkActive="active">{{row.order_no}}</a>
                                    </td>
                                    <td class="w200">{{row?.company_name}} - ({{row.name}} {{row.mobile}})</td>
                                    <td class="w80 text-center">{{row.order_item}}</td>
                                    <td class="w90 text-right">{{row.qty}}</td>
                                    <td class="w90 text-right" *ngIf="login_data?.organisation_data?.order_place==0">
                                        <strong>&#x20B9; {{row.order_grand_total}}</strong>
                                    </td>
                                    <td class="w200">{{row.order_create_remark}}</td>
                                </tr>
                            </ng-container>
                            <ng-container *ngIf="secondaryLoader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(50)">
                                    <td class="w50">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w110">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w110">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w80">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w200">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W80 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W90 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W90 text-right" *ngIf="login_data?.organisation_data?.order_place==0">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W200 text-right">
                                        <div>&nbsp;</div>
                                    </td>

                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
                <ng-container *ngIf="secondary_order_list.length <= 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>
            <div class="fab-btns" *ngIf="login_data.user_type=='DMS'">
                <button mat-fab class="pulse" color="primary"
                    [routerLink]="login_data?.organisation_data?.order_place == 1?'/secondary-order-list/secondary-order-add-quantity':'/secondary-order-list/secondary-order-add'">
                    <i class="material-icons">add</i>
                    Add Order
                </button>
            </div>

        </div>

        <div *ngIf="tabType== 'transaction'" style="margin: -10px -10px 0px -10px;">
            <div class="tools-container no-sticky">
                <div class="mat-tabbar">
                    <button mat-button [ngClass]="{'active' :wallet_history_type== 'ledger'}"
                        (click)="clearFilter(); getSecondaryWalletTransaction(); wallet_history_type= 'ledger'">
                        <i class="material-icons">receipt_long</i>
                        Ledger
                    </button>
                    <button mat-button [ngClass]="{'active' :wallet_history_type== 'scan_history'}"
                        (click)="clearFilter(); scan_history_data(); wallet_history_type= 'scan_history'">
                        <i class="material-icons">qr_code_scanner</i>
                        Scan History
                    </button>
                    <button mat-button [ngClass]="{'active' :wallet_history_type== 'redeem_history'}"
                        (click)="clearFilter(); redeem_history_data(); wallet_history_type = 'redeem_history'">
                        <i class="material-icons">redeem</i>
                        Redeem History
                    </button>
                </div>

                <div class="left-auto df flex-gap-10">
                    <a mat-icon-button matTooltip="Refresh" (click)="refresh()">
                        <i class="material-icons">refresh</i>
                    </a>

                    <div class="pagination" *ngIf="(walletTransaction.length > 0 && wallet_history_type== 'ledger')">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious(tabType)"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage(tabType)"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>

                    <div class="pagination" *ngIf="(couponData.length > 0 && wallet_history_type== 'scan_history')">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('scan')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('scan')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>

                    <div class="pagination"
                        *ngIf="(redeemHistory.length > 0 && wallet_history_type== 'redeem_history')">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('redeem')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('redeem')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="cs-table" *ngIf="wallet_history_type== 'ledger'">
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w60">S.no.</th>
                                <th class="w150">Date
                                    <div class="sorting">
                                        <a (click)="openBottomSheet('ledger_filter')" matTooltip="Export Excel">
                                            <i class="material-icons">filter_alt</i>
                                        </a>
                                    </div>
                                </th>
                                <th class="w150">Transaction Type</th>
                                <th class="text-right">Credit</th>
                                <th class="text-right">Debit</th>
                                <th class="w160 text-right">Balance</th>
                            </tr>
                        </table>
                    </div>
                    <div class="table-head border-top">
                        <table class="sno-border">
                            <tr>
                                <th class="w60">&nbsp;</th>
                                <th class="w150">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="cs-input date-column infix-bodr">
                                            <input matInput [matDatepicker]="picker1" placeholder="Date" name="date"
                                                [(ngModel)]="filter.date_created" [max]="today_date"
                                                (dateChange)="date_format(tabType)" disabled>
                                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                            <mat-datepicker #picker1 disabled="false"></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w150 text-right">
                                    <div class="th-search-acmt">
                                        <mat-form-field>
                                            <input type="text" matInput placeholder="Search ..." name="transaction_type"
                                                (keyup.enter)="getLedger()" #transaction_type="ngModel"
                                                [(ngModel)]="filter.transaction_type">
                                            <mat-autocomplete #search="matAutocomplete">
                                                <mat-option>
                                                </mat-option>
                                            </mat-autocomplete>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="text-right">&nbsp;</th>
                                <th class="text-right">&nbsp;</th>
                                <th class="w160">&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="table-container">
                    <div class="table-content">
                        <table>
                            <ng-container *ngIf="!loader">
                                <tr *ngFor="let row of walletTransaction; let i =index">
                                    <td class="w60">{{i+1+sr_no}}</td>
                                    <td class="w150">{{row.date_created | date : 'dd MMM yyy ,h:mm a'}}</td>
                                    <td class="w150">{{row.transaction_type}}</td>
                                    <td class="text-right">
                                        <strong class="green-clr" *ngIf="row.credit > 0">+ {{row.credit}} pt</strong>
                                        <ng-container *ngIf="row.credit == 0">---</ng-container>
                                        <br>
                                        <ng-container *ngIf="row.credit > 0">{{row.transaction_remark}}</ng-container>
                                    </td>
                                    <td class="text-right">
                                        <strong class="red-clr" *ngIf="row.debit > 0">- {{row.debit}} pt</strong>
                                        <ng-container *ngIf="row.debit == 0">---</ng-container>
                                        <br>
                                        <ng-container *ngIf="row.debit > 0">{{row.transaction_remark}}</ng-container>
                                    </td>
                                    <td class="w160 text-right">
                                        <strong>{{row.balance}} pt</strong>
                                    </td>
                                </tr>
                            </ng-container>

                            <ng-container *ngIf="loader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w60">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td>
                                        <div>&nbsp;</div>
                                    </td>
                                    <td>
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w160">
                                        <div>&nbsp;</div>
                                    </td>
                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
                <ng-container *ngIf="walletTransaction.length == 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>

            <div class="cs-table  horizontal-scroll" *ngIf="wallet_history_type== 'scan_history'">
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w60">Sr.No</th>
                                <th class="w140">Coupon Code</th>
                                <!-- <th class="w250">Product Detail</th>
                        <th class="w100">Dispatch Date</th>
                        <th class="w100">Dispatch Type</th>
                        <th class="w250">Dealer Detail</th>
                        <th class="w130">Invoice No.</th> -->
                                <th class="w110 text-right">Coupon value</th>
                                <th class="w100">Scan Date
                                    <div class="sorting">
                                        <a (click)="openBottomSheet('scan_history_filter')" matTooltip="Date Filter">
                                            <i class="material-icons">filter_alt</i>
                                        </a>
                                    </div>
                                </th>
                                <th class="w180">Bonus Name</th>
                                <th class="w110 text-right">Bonus Point</th>

                            </tr>
                        </table>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-content">
                        <table>
                            <ng-container *ngIf="!loader">
                                <tr *ngFor="let row of couponData let i = index;">
                                    <td class="w60">{{i+1+sr_no}}</td>
                                    <td class="w140">{{row.coupon_code?row.coupon_code:'---'}}</td>
                                    <!-- <td class="w250">{{row.product_detail?row.product_detail:'---'}}</td>
                            <td class="w100">
                                {{row.dispatch_date != "0000-00-00 00:00:00" ? (row.dispatch_date | date:'d MMM y') : '---'}}
                            </td>
                            <td class="w100">{{row.dispatch_type}}</td>
                            <td class="w250">{{row.dr_detail}}</td>
                            <td class="w130">{{row.invoice_number}}</td> -->
                                    <td class="w110 text-right">
                                        <strong>{{row.total_point?row.total_point + ' PT':'---'}}</strong>
                                    </td>
                                    <td class="w100">{{row.scanned_date | date:'d MMM y, h:mm a'}}</td>
                                    <td class="w180">{{row.bonus_scheme_name}}</td>
                                    <td class="w110 text-right"><strong>{{row.bonus_point?row.bonus_point + '
                                            PT':'---'}}</strong></td>

                                </tr>
                            </ng-container>

                            <ng-container *ngIf="loader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w60">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w140">
                                        <div>&nbsp;</div>
                                    </td>
                                    <!-- <td class="w250">
                                <div>&nbsp;</div>
                            </td>
                            <td class="w100">
                                <div>&nbsp;</div>
                            </td>
                            <td class="w100">
                                <div>&nbsp;</div>
                            </td>
                            <td class="w250">
                                <div>&nbsp;</div>
                            </td>
                            <td class="w130">
                                <div>&nbsp;</div>
                            </td> -->
                                    <td class="w110 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w180">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w110 text-right">
                                        <div>&nbsp;</div>
                                    </td>

                                </tr>
                            </ng-container>
                            <ng-container *ngIf="couponData.length == 0">
                                <app-not-result-found></app-not-result-found>
                            </ng-container>
                        </table>
                    </div>
                </div>
            </div>

            <div class="cs-table horizontal-scroll" *ngIf="wallet_history_type== 'redeem_history'">
                <div class="sticky-head">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w60">Sr.No</th>
                                <th class="w90">Date</th>
                                <th class="w110">Req. ID</th>
                                <th class="w200">Gift</th>
                                <th class="w100 text-right">Points Request</th>
                                <th class="w100 text-right">Equivalent Cash</th>
                                <th class="w110">Redeem Status</th>
                                <th class="w90">Payment Mode</th>
                                <th class="w150">TXN ID</th>
                                <th class="w100  text-center">Status</th>
                                <th class="w200">TXN Remark</th>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-content">
                        <table>
                            <ng-container *ngIf="!loader">
                                <tr *ngFor="let row of redeemHistory; let i = index;">
                                    <td class="w60">{{i + 1 + sr_no}}</td>
                                    <td class="w90">{{row.date_created | date :'dd MMM yyyy'}}</td>
                                    <td class="w110">{{row.req_id ? row.req_id : '---'}}</td>
                                    <td class="w200">{{row.gift_name ? row.gift_name : '---'}}</td>
                                    <td class="w100 text-right"><strong>{{row.point ? row.point : '---'}}</strong></td>
                                    <td class="w100 text-right"><strong>{{row.cash_point ? row.cash_point :
                                            '---'}}</strong></td>
                                    <td class="w110"><strong class="{{row.status}}">{{row.status}}</strong> </td>
                                    <td class="w90"><strong>{{row.payment_mode ? row.payment_mode : '---'}}</strong>
                                    </td>
                                    <td class="w150">
                                        <ng-container>
                                            {{row.razorpay_payout_id}}
                                        </ng-container>
                                        <ng-container>
                                            {{row.transaction_id}}
                                        </ng-container>
                                    </td>
                                    <td class="w100  text-center">
                                        <strong class="{{row.transfer_status}}">{{row.transfer_status |
                                            titlecase}}</strong>
                                    </td>
                                    <td class="w200">{{row.transfer_remark.replaceAll('_',' ') | titlecase}}</td>
                                </tr>
                            </ng-container>

                            <ng-container *ngIf="loader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w60">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w90">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w110">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w200">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w110">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w90">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w200">
                                        <div>&nbsp;</div>
                                    </td>
                                </tr>
                            </ng-container>
                            <ng-container *ngIf="redeemHistory.length == 0">
                                <app-not-result-found></app-not-result-found>
                            </ng-container>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="tabType== 'Retailer'" style="margin: -10px -10px 0px -10px;">
            <div class="cs-table">
                <div class="left-auto jfe df flex-gap-10">
                    <a mat-icon-button matTooltip="Refresh" (click)="refresh(tabType)">
                        <i class="material-icons">refresh</i>
                    </a>

                    <div class="pagination" *ngIf="retailer.length > 0">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('retailer')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('retailer')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w40">S.No.</th>
                                <!-- <th class="w120">Customer Category</th> -->
                                <th class="w160">Company Name</th>
                                <th class="w140">Contact Person</th>
                                <th class="w80">Mobile</th>
                                <th class="w180">Address</th>
                                <th class="w80 text-right">Last Visit</th>
                                <th class="w80 text-right">Last Order</th>
                                <th class="w80 text-right">Order Frequency</th>
                                <th class="w100 text-right">Current Year Sales</th>
                            </tr>
                        </table>
                    </div>

                    <div class="table-head border-top">
                        <table>
                            <tr>
                                <th class="w40">&nbsp;</th>
                                <!-- <th class="w120">
                    <div class="th-search-acmt">
                        <mat-form-field class="example-full-width cs-input select-input">
                            <input matInput placeholder="Search..." type="text" name="dr_sale_category"
                            [(ngModel)]="filter.dr_sale_category"
                            (keyup.enter)="!filter.dr_sale_category ?  refresh(tabType) : getRetailer()">
                        </mat-form-field>
                    </div>
                </th> -->
                                <th class="w160">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="company_name"
                                                [(ngModel)]="filter.company_name"
                                                (keyup.enter)="!filter.company_name ?  refresh(tabType) : getRetailer()">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w140">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="contact_person"
                                                [(ngModel)]="filter.contact_person"
                                                (keyup.enter)="!filter.contact_person ?  refresh(tabType) : getRetailer()">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w80">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="mobile"
                                                [(ngModel)]="filter.mobile"
                                                onkeypress="return event.charCode>=48 && event.charCode<=57"
                                                (keyup.enter)="!filter.mobile ?  refresh(tabType) : getRetailer()">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w180">&nbsp;</th>
                                <th class="w80">&nbsp;</th>
                                <th class="w80">&nbsp;</th>
                                <th class="w80">&nbsp;</th>
                                <th class="w100">&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>


                <div class="table-container" *ngIf="retailer.length > 0">
                    <div class="table-content">
                        <table>

                            <ng-container *ngIf="!retailerLoader">
                                <tr *ngFor="let row of retailer; let i =index">
                                    <td class="w40">{{i+1+sr_no}}</td>
                                    <!-- <td class="w120"><strong>{{row.dr_sale_category ? row.dr_sale_category
                        :'---'}}</strong></td> -->
                                    <td class="w160">{{row?.company_name | titlecase}}</td>
                                    <td class="w140">{{row.contact_person_name | titlecase}}</td>
                                    <td class="w80">{{row.mobile}}</td>
                                    <td class="w180">{{row.address}}</td>
                                    <td class="w80 text-right">{{row.last_checkin == 0 ? '--' : row.last_checkin + "
                                        day's ago" }}</td>
                                    <td class="w80 text-right">
                                        <ng-container *ngIf="row.last_order_days">
                                            {{row.last_order_days == 0 ? 'Today' : row.last_order_days + " day's ago" }}
                                        </ng-container>
                                    </td>
                                    <td class="w80 text-right">
                                        {{row.order_frequency == '0' ? '---' : row.order_frequency + " day"}}
                                    </td>
                                    <td class="w100 text-right"><strong>&#x20B9; {{row.current_year_sales}}</strong>
                                    </td>
                                </tr>
                            </ng-container>
                            <ng-container *ngIf="retailerLoader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w40">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w60 text-center">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w160">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w140">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w80">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w180">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w80 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w80 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w80 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>

                <ng-container *ngIf="retailer.length <= 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>
        </div>


        <div *ngIf="tabType== 'Target'">
            <div class="tab-surface" style="margin: -10px -10px 0px -10px;">
                <button *ngFor="let row of target_calenderInfo; let i =index;" mat-button
                    [ngClass]="targetMonth == row.month && targetYear == row.year ? 'active' : ''"
                    (click)="getTarget(row.month,row.year);">{{row.month_name}} {{row.year}}</button>
            </div>
            <div class="row">
                <div class="col s12 m5 l5">
                    <div [hidden]="hide_target_chart" class="card mt10" *ngIf="!skLoading">
                        <div class="card-head">
                            <h2>Target V/S Achievement</h2>
                        </div>
                        <canvas #targetbarCanvas></canvas>
                        <!-- <div style="display: block;" class="chart">
                    <img src="assets/chart/2.jpeg" style="max-width: 100%;">
                </div> -->
                    </div>
                </div>


                <div class="col s12 m7 l7">
                    <div class="card mt10" *ngIf="!skLoading">
                        <div class="card-head">
                            <h2>Target V/S Achievement</h2>
                        </div>
                        <div class="card-body">
                            <div class="cs-table left-right-10">
                                <div class="sticky-head border-top">
                                    <div class="table-head">
                                        <table>
                                            <tr>
                                                <th class="w50">S.No.</th>
                                                <th>Brand</th>
                                                <th class="w120 text-right">Target (in Lakhs)</th>
                                                <th class="w100 text-right">Achieved</th>
                                                <th class="w85 text-center">Achieved %</th>
                                                <th class="w100">Status</th>
                                            </tr>
                                        </table>
                                    </div>
                                </div>


                                <div class="table-container pb0">
                                    <div class="table-content">
                                        <table>
                                            <ng-container *ngIf="!targetLoader">
                                                <tr *ngFor="let row of target_list; let i =index">
                                                    <td class="w50">{{i+1}}</td>
                                                    <td>{{row.brand_name+'-'+row.brand_code}}</td>
                                                    <td class="w120 text-right"><strong>&#x20B9; {{row.value}}</strong>
                                                    </td>
                                                    <td class="w100 text-right Approve"><strong>&#x20B9; {{row.achieved
                                                            | number:'1.0-1'}}</strong>
                                                    </td>
                                                    <td class="w85 text-center">
                                                        {{row.target_percentage == 'Infinity' ? '---' :
                                                        row.target_percentage >= 0 ? row.target_percentage + ' %' :
                                                        '0'}}
                                                    </td>
                                                    <td *ngIf="row.achieved >= row.value" class="w100 green-bg"
                                                        style="color:white">Completed</td>
                                                    <td *ngIf="row.achieved < row.value" class="w100 yellow-bgclr">In
                                                        Progress</td>
                                                </tr>
                                            </ng-container>
                                            <ng-container *ngIf="targetLoader">
                                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                                    <td class="w50">
                                                        <div>&nbsp;</div>
                                                    </td>
                                                    <td class="w100 text-center">
                                                        <div>&nbsp;</div>
                                                    </td>
                                                    <td class="w100">
                                                        <div>&nbsp;</div>
                                                    </td>
                                                    <td class="w85">
                                                        <div>&nbsp;</div>
                                                    </td>
                                                    <td class="w100">
                                                        <div>&nbsp;</div>
                                                    </td>

                                                </tr>
                                            </ng-container>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>





        </div>



        <div *ngIf="tabType== 'Ledger'" style="margin: -10px -10px 0px -10px;">
            <div class="tools-container no-sticky">
                <div class="mat-tabbar">
                    <button mat-button [ngClass]="{'active' :ledgerType== 'ledger'}"
                        *ngIf="login_data.organisation_data.dms_ledger_api == '1'"
                        (click)="clearFilter(); getLedger(); ledgerType= 'ledger'"><i
                            class="material-icons">receipt_long</i>Ledger</button>

                    <button mat-button [ngClass]="{'active' :ledgerType== 'billing'}"
                        (click)="clearFilter(); invoice_data(currentMonth_no,currentYear); ledgerType= 'billing'"><i
                            class="material-icons">receipt</i>Invoice</button>

                    <button mat-button [ngClass]="{'active' :ledgerType== 'payment'}"
                        (click)="clearFilter(); payment_data(currentMonth_no,currentYear); ledgerType = 'payment'"><i
                            class="material-icons">receipt</i>Pending Bills</button>

                    <button mat-button [ngClass]="{'active' :ledgerType== 'credit_note'}"
                        *ngIf="login_data.organisation_data.dms_ledger_api == '0'"
                        (click)="clearFilter(); cn_data(currentMonth_no,currentYear); ledgerType = 'credit_note'"><i
                            class="material-icons">receipt</i>Payment</button>
                </div>
                <div class="left-auto ac df flex-gap-10">
                    <a mat-icon-button matTooltip="Refresh" (click)="refresh(tabType)">
                        <i class="material-icons">refresh</i>
                    </a>

                    <div class="pagination"
                        *ngIf="(ledgerType== 'ledger' && ledger_data.length > 0) || (ledgerType== 'billing' && invoice_listing.length > 0) || (ledgerType== 'payment'&& payment_listing.length > 0) || (ledgerType== 'credit_note' && cn_listing.lenth > 0)">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('ledger')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('ledger')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>


            <div class="tab-surface" *ngIf="ledgerType == 'billing' ">
                <button *ngFor="let row of invoice_calenderInfo; let i =index;" mat-button
                    [ngClass]="invoiceMonth == row.month && invoiceYear == row.year ? 'active' : ''"
                    (click)="invoice_data(row.month, row.year);">{{row.month_name}} {{row.year}}<span
                        class="order-value">&#x20B9; {{row.total_billing_amount ? row.total_billing_amount:
                        '0'}}</span></button>
            </div>
            <!-- <div class="tab-surface" *ngIf="ledgerType == 'payment' ">
        <button *ngFor="let row of payment_calenderInfo; let i =index;" mat-button
        [ngClass]="paymentMonth == row.month && paymentYear == row.year ? 'active' : ''"
        (click)="payment_data(row.month,row.year);">{{row.month_name}} {{row.year}}<span
        class="order-value">&#x20B9; {{row.total_payment_amount ? row.total_payment_amount:
        '0'}}</span></button>
    </div> -->
            <!-- <div class="tab-surface" *ngIf="ledgerType == 'credit_note' ">
        <button *ngFor="let row of cn_calenderInfo; let i =index;" mat-button
        [ngClass]="cnMonth == row.month && cnYear == row.year ? 'active' : ''"
        (click)="cn_data(row.month,row.year);">{{row.month_name}} {{row.year}}<span
        class="order-value">&#x20B9; {{row.total_payment_amount ? row.total_payment_amount:
        '0'}}</span></button>
    </div> -->
            <div class="cs-table" *ngIf="ledgerType== 'ledger'">
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w60">S.no.</th>
                                <th class="w150">Date</th>
                                <th class="text-right">Payment</th>
                                <th class="text-right">Billing</th>
                                <th class="w160 text-right">Balance</th>
                            </tr>
                        </table>
                    </div>
                    <div class="table-head border-top">
                        <table class="sno-border">
                            <tr>
                                <th class="w60">&nbsp;</th>
                                <th class="w150">
                                    <!-- <div class="th-search-acmt">
                                <mat-form-field class="cs-input date-column infix-bodr">
                                    <input matInput [matDatepicker]="picker1" placeholder="Date" name="date"
                                    [(ngModel)]="filter.date_created" (dateChange)="date_format(tabType)"
                                    disabled>
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1 disabled="false"></mat-datepicker>
                                </mat-form-field>
                            </div> -->
                                    <div class="sorting">
                                        <a (click)="openBottomSheet()" matTooltip="Date Filter">
                                            <i class="material-icons">filter_alt</i>
                                        </a>
                                    </div>
                                </th>
                                <th class="text-right">&nbsp;</th>
                                <th class="text-right">&nbsp;</th>
                                <th class="w160">&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>


                <div class="table-container">
                    <div class="table-content">
                        <table>
                            <tr *ngFor="let row of ledger_data; let i =index">
                                <td class="w60">{{i+1+sr_no}}</td>
                                <td class="w150">{{row.date_created | date : 'dd MMM yyy ,h:mm a'}}</td>
                                <td class="text-right"><strong class="green-clr">&#x20B9;{{row.ledger_type ==
                                        'Credit' ? row.transaction_amount : 0}}</strong>
                                    <br>
                                    {{row.ledger_type == 'Credit' ? row.remark : ' '}}
                                </td>
                                <td class="text-right"><strong class="red-clr">&#x20B9; {{row.ledger_type ==
                                        'Debit' ? row.transaction_amount : 0}}</strong>
                                    <br>
                                    {{row.ledger_type == 'Debit' ? row.remark : ' '}}
                                </td>
                                <td class="w160 text-right"><strong>&#x20B9; {{row.balance_amount}}</strong></td>


                            </tr>

                            <ng-container *ngIf="ledger_loader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w60">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td>
                                        <div>&nbsp;</div>
                                    </td>
                                    <td>
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w160">
                                        <div>&nbsp;</div>
                                    </td>

                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
                <ng-container *ngIf="ledger_data.length == 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>
            <div class="cs-table" *ngIf="ledgerType == 'billing'">
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w30">S.no.</th>
                                <th class="w100">Date Created</th>
                                <th class="w100">Document Date</th>
                                <th class="w100">Invoice Number</th>
                                <th class="w80 text-center">Total Item</th>
                                <th class="w80 text-center">Total QTY.</th>
                                <th class="w100 text-right">Invoice Amount</th>
                                <th class="w100 text-right">Payment</th>
                                <th class="w100 text-right">Balance Amount</th>
                            </tr>
                        </table>
                    </div>

                    <div class="table-head border-top">
                        <table>
                            <tr>
                                <th class="w30">&nbsp;</th>
                                <th class="w100">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input">
                                            <input matInput [matDatepicker]="picker2" placeholder="Date" name="date"
                                                [(ngModel)]="filter.date_created" (dateChange)="date_format(tabType)"
                                                readonly>
                                            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                            <mat-datepicker #picker2></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w100">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input">
                                            <input matInput [matDatepicker]="Invoicepicker" placeholder="Date"
                                                name="billing_date" [(ngModel)]="filter.billing_date"
                                                (dateChange)="date_format1(tabType)" readonly>
                                            <mat-datepicker-toggle matSuffix
                                                [for]="Invoicepicker"></mat-datepicker-toggle>
                                            <mat-datepicker #Invoicepicker></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w100">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input">
                                            <input matInput placeholder="Search" name="bill_number"
                                                [(ngModel)]="filter.bill_number"
                                                (keyup.enter)="!filter.bill_number ? refresh(tabType): invoice_data(invoiceMonth,invoiceYear)">
                                        </mat-form-field>
                                    </div>
                                </th>

                                <th class="w80 text-center">&nbsp;</th>
                                <th class="w80 text-center">&nbsp;</th>
                                <th class="w100 text-right">&nbsp;</th>
                                <th class="w100 text-right">&nbsp;</th>
                                <th class="w100 text-right">&nbsp;</th>

                            </tr>
                        </table>
                    </div>
                </div>


                <div class="table-container">
                    <div class="table-content">
                        <table>
                            <tr *ngFor="let row of invoice_listing; let i =index">
                                <td class="w30">{{i+1+sr_no}}</td>
                                <td class="w100">{{row.date_created | date:'dd MMM yyyy , h:mm a'}}</td>
                                <td class="w100">{{row.billing_date | date:'dd MMM yyyy'}}</td>
                                <td class="w100"><a class="link-btn" (click)="service.setData(filter)"
                                        [routerLink]="[ 'billing-details/', row.encrypt_id_invoice ]"
                                        [queryParams]="{'id':row.encrypt_id_invoice}">{{row.bill_number}}</a></td>

                                <td class="w80 text-center">{{row.total_billing_item}}</td>
                                <td class="w80 text-center">{{row.total_billing_item_qty}}</td>
                                <td class="w100 text-right"><strong>&#x20B9; {{row.net_amount}}</strong></td>
                                <td class="w100 text-right"><strong>&#x20B9; {{row.billing_receive_amount}}</strong>
                                </td>
                                <td class="w100 text-right"><strong>&#x20B9; {{row.pending_balance}}</strong></td>
                            </tr>

                            <ng-container *ngIf="invoice_loader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w30">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w80">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w80">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W100 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W100 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="W100 text-right">
                                        <div>&nbsp;</div>
                                    </td>
                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
                <ng-container *ngIf="invoice_listing.length == 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>

            <div class="cs-table" *ngIf="ledgerType == 'payment'">
                <div class="sticky-head">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w40">S.no.</th>
                                <th class="w100">Date Created </th>
                                <th class="w80">Invoice Date</th>
                                <th class="w100">Invoice Number</th>
                                <th class="w150">Company Name</th>
                                <th class="w100">State</th>
                                <th class="w80">District</th>
                                <th class="w100 text-right">Invoice Amount</th>
                                <th class="w100 text-right">Received Amount</th>
                                <th class="w100 text-right">Balance Amount</th>
                                <th class="w100 text-right" *ngIf="orgCode.length">Organisation Name/Code</th>

                            </tr>
                        </table>
                    </div>

                    <div class="table-head border-top">
                        <table class="sno-border">
                            <tr>
                                <th class="w40">&nbsp;</th>
                                <th class="w100">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input">
                                            <input matInput [matDatepicker]="picker2" placeholder="Date"
                                                name="date_created" [(ngModel)]="filter.date_created"
                                                (ngModelChange)="date_created_format($event)" readonly>
                                            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                            <mat-datepicker #picker2></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w80">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input">
                                            <input matInput [matDatepicker]="picker3" placeholder="Date"
                                                name="invoice_date" [(ngModel)]="filter.invoice_date"
                                                (ngModelChange)="invoice_date_format($event)" readonly>
                                            <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                                            <mat-datepicker #picker3></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w100">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input">
                                            <input matInput placeholder="Search" name="invoice_number"
                                                [(ngModel)]="filter.invoice_number"
                                                (keyup.enter)="pendingBillsData('')">
                                        </mat-form-field>
                                    </div>
                                </th>

                                <th class="w150 text-center">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input">
                                            <input matInput placeholder="Search" name="company_name"
                                                [(ngModel)]="filter.company_name" (keyup.enter)="pendingBillsData('')">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w100 text-center">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input">
                                            <input matInput placeholder="Search" name="state" [(ngModel)]="filter.state"
                                                (keyup.enter)="pendingBillsData('')">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w80 text-center">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input">
                                            <input matInput placeholder="Search" name="district"
                                                [(ngModel)]="filter.district" (keyup.enter)="pendingBillsData('')">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w100 text-center">&nbsp;</th>
                                <th class="w100 text-right">&nbsp;</th>
                                <th class="w100 text-right">&nbsp;</th>
                                <th class="w100 text-center" *ngIf="orgCode.length">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input">
                                            <input matInput placeholder="Search" name="organisation_id"
                                                [(ngModel)]="filter.organisation_id"
                                                (keyup.enter)="pendingBillsData('')">
                                        </mat-form-field>
                                    </div>
                                </th>

                            </tr>
                        </table>
                    </div>
                </div>




                <div class="table-container mb50">
                    <div class="table-content" *ngIf="payment_listing.length > 0">
                        <table>
                            <ng-container *ngIf="payment_loader == false">
                                <tr *ngFor="let row of payment_listing;let i=index"
                                    [ngClass]="{'Current': service.currentUserID == row.id}">
                                    <td class="w40">{{ i+1}}</td>
                                    <td class="w100">{{row.date_created | date:'dd MMM yyyy'}}</td>
                                    <td class="w80">{{row.invoice_date | date:'dd MMM yyyy'}}</td>
                                    <td class="w100"> {{row.invoice_number}} </td>
                                    <td class="w150">{{row.company_name ? (row.company_name | titlecase) : ''}}</td>
                                    <td class="w100">{{row.state ? (row.state | titlecase) : ''}}</td>
                                    <td class="w80">{{row.district ? (row.district | titlecase) : ''}}</td>
                                    <td class="w100 text-right"><strong>&#x20B9; {{row.invoice_amount}}</strong></td>
                                    <td class="w100 text-right"><strong>&#x20B9;
                                            {{row.invoice_payment_recieved}}</strong>
                                    </td>
                                    <td class="w100 text-right"><strong>&#x20B9; {{row.invoice_balance_payment |
                                            number:'1.2-2'}}</strong></td>

                                    <td class="w100 text-right" *ngIf="orgCode.length">
                                        <strong>{{row.organisation_id}}</strong>
                                    </td>

                                </tr>
                            </ng-container>
                            <ng-container *ngIf="payment_loader == true">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w40">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w200">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w120">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w120">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
                <ng-container *ngIf="payment_listing.length == 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>

            <div class="cs-table" *ngIf="ledgerType == 'credit_note'">
                <div class="sticky-head">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w60">S.no.</th>
                                <th class="w100">Payment Date</th>
                                <th class="w200">Customer Details</th>
                                <th class="w100">Payment Type</th>
                                <th class="w100">Transaction Number</th>
                                <th class="w100">Transaction Type</th>
                                <th class="w100 text-right">Transaction Amount</th>
                                <th class="w200">Remark</th>
                            </tr>
                        </table>
                    </div>

                    <div class="table-head border-top">
                        <table class="sno-border">
                            <tr>
                                <th class="w60">&nbsp;</th>
                                <th class="w100">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="cs-input date-column infix-bodr">
                                            <input matInput [matDatepicker]="picker1" placeholder="Date"
                                                name="transaction_date" [(ngModel)]="filter.transaction_date"
                                                (ngModelChange)="date_format($event,OrderMonth,OrderYear)" readonly>
                                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                            <mat-datepicker #picker1 disabled="false"></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>

                                <th class="w200">&nbsp;</th>
                                <th class="w100">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search ..." type="text" name="payment_type"
                                                [(ngModel)]="filter.payment_type"
                                                (keyup.enter)="creditNote('',OrderMonth,OrderYear)">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w100">&nbsp;</th>
                                <th class="w100">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search ..." type="text" name="transaction_type"
                                                [(ngModel)]="filter.transaction_type"
                                                (keyup.enter)="creditNote('',OrderMonth,OrderYear)">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w100 text-right">&nbsp;</th>
                                <th class="w200">&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>


                <div class="table-container">
                    <div class="table-content">
                        <table>
                            <tr *ngFor="let row of cn_listing; let i =index">
                                <td class="w60">{{ i + 1 + sr_no }}</td>
                                <td class="w100">{{ row.transaction_date != '0000-00-00' ? (row.transaction_date |
                                    date:'dd MMM yyyy') : '---'}}</td>
                                <td class="w200">{{row.company_name ? (row.company_name | titlecase) : '---'}}</td>

                                <td class="w100">{{row.payment_type ? row.payment_type : '---'}}</td>
                                <td class="w100">{{row.transaction_id ?row.transaction_id :'---'}}</td>
                                <td class="w100">{{row.transaction_type ? row.transaction_type : '---'}}</td>
                                <td class="w100">{{row.transaction_amount ?row.transaction_amount : '---'}}</td>
                                <td class="w200">{{row.remark ? row.remark : '---'}}</td>
                            </tr>
                            <ng-container *ngIf="cn_loader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w30">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w220">
                                        <div>&nbsp;</div>
                                    </td>
                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
                <ng-container *ngIf="cn_listing.length == 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>
        </div>



        <div *ngIf="tabType== 'Point Ledger'" style="margin: -10px -10px 0px -10px;">
            <div class="tools-container no-sticky">
                <div class="left-auto df ac flex-gap-10">
                    <a mat-icon-button matTooltip="Refresh" (click)="refresh(tabType)">
                        <i class="material-icons">refresh</i>
                    </a>

                    <div class="pagination" *ngIf="point_ledger.length > 0">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('ledger')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('ledger')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="cs-table">
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w60">S.no.</th>
                                <th class="w150">Date</th>
                                <th class="text-right">Point In</th>
                                <th class="text-right">Point Out</th>
                                <th class="w160 text-right">Balance</th>
                            </tr>
                        </table>
                    </div>
                    <div class="table-head border-top">
                        <table class="sno-border">
                            <tr>
                                <th class="w60">&nbsp;</th>
                                <th class="w150">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="cs-input date-column infix-bodr">
                                            <input matInput [matDatepicker]="picker1" placeholder="Date"
                                                name="date_created" [(ngModel)]="filter.date_created"
                                                (dateChange)="date_format(tabType)" disabled>
                                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                            <mat-datepicker #picker1 disabled="false"></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="text-right">&nbsp;</th>
                                <th class="text-right">&nbsp;</th>
                                <th class="w160">&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>


                <div class="table-container">
                    <div class="table-content">
                        <table>
                            <tr *ngFor="let row of point_ledger; let i =index">
                                <td class="w60">{{i+1+sr_no}}</td>
                                <td class="w150">{{row.date_created | date : 'dd MMM yyy ,h:mm a'}}</td>
                                <td class="text-right">
                                    <ng-container *ngIf="row.credit == 0">--</ng-container>
                                    <ng-container *ngIf="row.credit > 0">
                                        <strong class="green-clr">{{row.credit}} PT</strong>
                                        <br>
                                        {{row.transaction_remark}} ({{row.transaction_type}})
                                    </ng-container>
                                </td>
                                <td class="text-right">
                                    <ng-container *ngIf="row.debit == 0">--</ng-container>
                                    <ng-container *ngIf="row.debit > 0">
                                        <strong class="red-clr">{{row.debit}} PT</strong>
                                        <br>
                                        {{row.transaction_remark}} ({{row.transaction_type}})
                                    </ng-container>
                                </td>
                                <td class="w160 text-right"><strong>{{row.balance}} PT</strong></td>
                            </tr>

                            <ng-container *ngIf="ledger_loader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w60">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td>
                                        <div>&nbsp;</div>
                                    </td>
                                    <td>
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w160">
                                        <div>&nbsp;</div>
                                    </td>

                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
                <ng-container *ngIf="point_ledger.length == 0">
                    <app-not-result-found></app-not-result-found>
                </ng-container>
            </div>
        </div>


        <div *ngIf="tabType== 'transferRequests'" style="margin: -10px -10px 0px -10px;">
            <div class="tools-container no-sticky">
                <div class="mat-tabbar">
                    <button mat-button [ngClass]="{'active' :activeTab== 'Pending'}"
                        (click)="clearFilter(); getTransferRequests(activeTab= 'Pending'); activeTab= 'Pending'">
                        Pending ({{tabCount.Pending}})
                    </button>

                    <button mat-button [ngClass]="{'active' :activeTab== 'Approved'}"
                        (click)="clearFilter(); getTransferRequests(activeTab= 'Approved'); activeTab= 'Approved'">
                        Approved ({{tabCount.Approved}})
                    </button>

                    <button mat-button [ngClass]="{'active' :activeTab== 'Reject'}"
                        (click)="clearFilter(); getTransferRequests(activeTab= 'Reject'); activeTab= 'Reject'">
                        Reject ({{tabCount.Reject}})
                    </button>
                </div>

                <div class="left-auto jfe df flex-gap-10">
                    <a mat-icon-button matTooltip="Refresh" (click)="refresh(tabType)">
                        <i class="material-icons">refresh</i>
                    </a>

                    <div class="pagination" *ngIf="transferRequestsList.length > 0">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('transferRequests')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('transferRequests')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="cs-table horizontal-scroll">
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w60 text-center">S.No.</th>
                                <th class="w150">Date Created</th>
                                <th class="">Requested By</th>
                                <th class="w100 text-center">Total Items</th>
                                <th class="w110" *ngIf="activeTab == 'Pending'"></th>
                                <th class="w100">Attachment</th>
                                <!-- <th class="w100" *ngIf="activeTab == 'Pending'"></th> -->
                                <th class="w150" *ngIf="activeTab == 'Reject'">Remark</th>
                            </tr>
                        </table>
                    </div>

                    <div class="table-head border-top">
                        <table>
                            <tr>
                                <th class="w60">&nbsp;</th>
                                <th class="w150">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="cs-input date-column infix-bodr">
                                            <input matInput [matDatepicker]="picker1" placeholder="Date" name="date"
                                                [(ngModel)]="filter.date_created" (dateChange)="date_format(tabType)"
                                                disabled>
                                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                            <mat-datepicker #picker1 disabled="false"></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="requested_by"
                                                [(ngModel)]="filter.requested_by"
                                                (keyup.enter)="!filter.requested_by ?  refresh(tabType) : getTransferRequests(activeTab)">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w100">&nbsp;</th>
                                <th class="w110" *ngIf="activeTab == 'Pending'">&nbsp;</th>
                                <th class="w100">&nbsp;</th>
                                <!-- <th class="w100" *ngIf="activeTab == 'Pending'">&nbsp;</th> -->
                                <th class="w150" *ngIf="activeTab == 'Reject'">&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>


                <div class="table-container">
                    <div class="table-content">
                        <table>

                            <ng-container *ngIf="!transferRequestsListLoader">
                                <tr *ngFor="let row of transferRequestsList; let i =index">
                                    <td class="w60 text-center">{{i+1+sr_no}}</td>
                                    <td class="w150">{{row.date_created | date:'d MMM y hh:mm a'}}</td>
                                    <td class="">{{row.retailer_detail | titlecase}}</td>
                                    <td class="w100 text-center">
                                        <a class="link-btn" mat-button (click)="openReqProductsDialog(row);"
                                            *ngIf="row.total_items">{{row.total_items}}</a>
                                        <p *ngIf="!row.total_items">--</p>
                                    </td>
                                    <td class="w110 text-center" *ngIf="activeTab == 'Pending'">
                                        <a class="link-btn" mat-button (click)="getStatusChnage(row);">Change Status</a>
                                    </td>
                                    <td class="w100">
                                        <a class="link-btn" mat-button (click)="imageModel(url+row.bill_image)"
                                            *ngIf="row.bill_image">View Attachment</a>
                                        <p *ngIf="!row.bill_image">--</p>
                                    </td>
                                    <!-- <td class="w100" *ngIf="activeTab == 'Pending'">
                            <a class="link-btn" mat-button (click)="approveTransferRequest(row);">Change Status</a>
                        </td> -->
                                    <td class="w150" *ngIf="activeTab == 'Reject'">{{row.reject_reason}}</td>
                                </tr>
                            </ng-container>
                            <ng-container *ngIf="transferRequestsListLoader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w60">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <!-- <td class="w100" *ngIf="activeTab == 'Pending'">
                            <div>&nbsp;</div>
                        </td> -->
                                    <td class="w150" *ngIf="activeTab == 'Reject'">
                                        <div>&nbsp;</div>
                                    </td>
                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
            </div>

            <ng-container *ngIf="transferRequestsList.length <= 0">
                <app-not-result-found></app-not-result-found>
            </ng-container>

        </div>

        <div *ngIf="tabType== 'sendRequest'" style="margin: -10px -10px 0px -10px;">
            <div class="tools-container no-sticky">
                <div class="mat-tabbar">
                    <button mat-button [ngClass]="{'active' :sendRequestTab== 'Pending'}"
                        (click)="clearFilter(); getSendRequest(sendRequestTab= 'Pending'); sendRequestTab= 'Pending'">
                        Pending ({{tabCount.Pending}})
                    </button>

                    <button mat-button [ngClass]="{'active' :sendRequestTab== 'Approved'}"
                        (click)="clearFilter(); getSendRequest(sendRequestTab= 'Approved'); sendRequestTab= 'Approved'">
                        Approved ({{tabCount.Approved}})
                    </button>

                    <button mat-button [ngClass]="{'active' :sendRequestTab== 'Reject'}"
                        (click)="clearFilter(); getSendRequest(sendRequestTab= 'Reject'); sendRequestTab= 'Reject'">
                        Reject ({{tabCount.Reject}})
                    </button>
                </div>

                <div class="left-auto jfe df flex-gap-10">
                    <a mat-icon-button matTooltip="Refresh" (click)="refresh(tabType)">
                        <i class="material-icons">refresh</i>
                    </a>

                    <div class="pagination" *ngIf="sendRequestList.length > 0">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('sendRequest')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('sendRequest')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="cs-table horizontal-scroll">
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w60 text-center">S.No.</th>
                                <th class="w150">Date Created</th>
                                <th class="">Requested To</th>
                                <th class="w100">Total Items</th>
                                <th class="w100">Attachment</th>
                                <th class="w150" *ngIf="sendRequestTab == 'Reject'">Remark</th>
                            </tr>
                        </table>
                    </div>

                    <div class="table-head border-top">
                        <table>
                            <tr>
                                <th class="w60">&nbsp;</th>
                                <th class="w150">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="cs-input date-column infix-bodr">
                                            <input matInput [matDatepicker]="picker1" placeholder="Date" name="date"
                                                [(ngModel)]="filter.date_created" (dateChange)="date_format(tabType)"
                                                disabled>
                                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                            <mat-datepicker #picker1 disabled="false"></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th>
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="requested_to"
                                                [(ngModel)]="filter.requested_to"
                                                (keyup.enter)="!filter.requested_to ?  refresh(tabType) : getSendRequest(sendRequestTab)">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w100">&nbsp;</th>
                                <th class="w100">&nbsp;</th>
                                <th class="w150" *ngIf="sendRequestTab == 'Reject'">&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>


                <div class="table-container">
                    <div class="table-content">
                        <table>

                            <ng-container *ngIf="!sendRequestLoader">
                                <tr *ngFor="let row of sendRequestList; let i =index">
                                    <td class="w60 text-center">{{i+1+sr_no}}</td>
                                    <td class="w150">{{row.date_created | date:'d MMM y hh:mm a'}}</td>
                                    <td class="">{{row.distributor_detail | titlecase}}</td>
                                    <td class="w100 text-center">
                                        <a class="link-btn" mat-button (click)="openSendProductsDialog(row);"
                                            *ngIf="row.total_items">{{row.total_items}}</a>
                                        <p *ngIf="!row.total_items">--</p>
                                    </td>
                                    <td class="w100">
                                        <a class="link-btn" mat-button (click)="imageModel(url+row.bill_image)"
                                            *ngIf="row.bill_image">View Attachment</a>
                                        <p *ngIf="!row.bill_image">--</p>
                                    </td>
                                    <td class="w150" *ngIf="sendRequestTab == 'Reject'">{{row.reject_reason}}</td>
                                </tr>
                            </ng-container>
                            <ng-container *ngIf="sendRequestLoader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w60">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150 text-center">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w100">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w150" *ngIf="sendRequestTab == 'Reject'">
                                        <div>&nbsp;</div>
                                    </td>
                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
            </div>

            <ng-container *ngIf="sendRequestList.length <= 0">
                <app-not-result-found></app-not-result-found>
            </ng-container>

        </div>

        <div *ngIf="tabType== 'stock'" style="margin: -10px -10px 0px -10px;">
            <div class="tools-container no-sticky">
                <div class="mat-tabbar">
                    <button mat-button [ngClass]="{'active' :stockTab== 'in_stock'}"
                        (click)="clearFilter(); getDrStock(stockTab= 'in_stock'); stockTab= 'in_stock'">
                        In Stock ({{tabCount.in_stock}})
                    </button>

                    <button mat-button [ngClass]="{'active' :stockTab== 'out_stock'}"
                        (click)="clearFilter(); getDrStock(stockTab= 'out_stock'); stockTab= 'out_stock'">
                        Out Stock ({{tabCount.out_stock}})
                    </button>
                </div>

                <div class="left-auto jfe df flex-gap-10">
                    <a mat-icon-button matTooltip="Refresh" (click)="refresh(tabType)">
                        <i class="material-icons">refresh</i>
                    </a>

                    <div class="pagination" *ngIf="drStockData.length > 0">
                        <div class="pagination-content">
                            Pages
                            <span>{{pagenumber}}</span>
                            of
                            <span>{{total_page}}</span>
                        </div>
                        <div class="page-nav">
                            <button mat-icon-button matTooltip="Older" (click)="pervious('stock')"
                                [disabled]="start == 0 || total_page == 0">
                                <i class="material-icons">navigate_before</i>
                            </button>
                            <button mat-icon-button matTooltip="Newer" (click)="nextPage('stock')"
                                [disabled]="pagenumber == total_page || total_page == 0 ">
                                <i class="material-icons">navigate_next</i>
                            </button>
                        </div>
                    </div>

                    <div *ngIf="login_data.user_type =='DMS'">
                        <button matTooltip="Send Stock" (click)="openModalStockToRetailer('Transfer')" mat-raised-button
                            color="accent" *ngIf="drStockData.current_stock.length">
                            <i class="material-icons">add_task</i> Send Stock
                        </button>

                        <button matTooltip="Send Stock" class="ml15" (click)="openModalStockToRetailer('Return')"
                            mat-raised-button color="primary">
                            <i class="material-icons">assignment_return</i> Sales Return
                        </button>
                    </div>
                </div>
            </div>
            <div class="cs-table horizontal-scroll">
                <div class="sticky-head" style="top: -10px;">
                    <div class="table-head">
                        <table>
                            <tr>
                                <th class="w60 text-center">S.No.</th>
                                <th class="">Product Detail</th>
                                <th class="w120 text-center">Current Stock</th>
                                <th class="w120 text-center">Dispatch Pending</th>
                                <!-- <th class="w120 text-center">Order Placed</th> -->
                                <th class="w120 text-center">Avg. Sale</th>
                            </tr>
                        </table>
                    </div>

                    <div class="table-head border-top">
                        <table>
                            <tr>
                                <th class="w60">&nbsp;</th>
                                <th class="">
                                    <div class="th-search-acmt">
                                        <mat-form-field class="example-full-width cs-input select-input">
                                            <input matInput placeholder="Search..." type="text" name="product_detail"
                                                [(ngModel)]="filter.product_detail"
                                                (keyup.enter)="!filter.product_detail ?  refresh(tabType) : getDrStock(stockTab)">
                                        </mat-form-field>
                                    </div>
                                </th>
                                <th class="w120">&nbsp;</th>
                                <th class="w120">&nbsp;</th>
                                <!-- <th class="w120">&nbsp;</th> -->
                                <th class="w120">&nbsp;</th>
                            </tr>
                        </table>
                    </div>
                </div>


                <div class="table-container">
                    <div class="table-content">
                        <table>

                            <ng-container *ngIf="!drStockLoader">
                                <tr *ngFor="let row of drStockData.current_stock; let i =index">
                                    <td class="w60 text-center">{{i+1+sr_no}}</td>
                                    <td class="">
                                        <a class="link-btn" mat-button
                                            (click)="openStockProductTransaction(row);">{{row.product_detail}}</a>
                                    </td>
                                    <td class="w120 text-center">{{row.current_stock}}</td>
                                    <td class="w120 text-center">{{row.dispatch_pending}}</td>
                                    <!-- <td class="w120 text-center">{{row.order_placed}}</td> -->
                                    <td class="w120 text-center">{{row.average_sale}}</td>
                                </tr>
                            </ng-container>
                            <ng-container *ngIf="drStockLoader">
                                <tr class="sk-loading" *ngFor="let row of [].constructor(10)">
                                    <td class="w60">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w120">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w120">
                                        <div>&nbsp;</div>
                                    </td>
                                    <td class="w120">
                                        <div>&nbsp;</div>
                                    </td>

                                </tr>
                            </ng-container>
                        </table>
                    </div>
                </div>
            </div>

            <ng-container *ngIf="drStockData.current_stock.length <= 0">
                <app-not-result-found></app-not-result-found>
            </ng-container>

            <!-- <div class="fab-btns lm" *ngIf="login_data.user_type!='DMS'">
    <button mat-fab class="excel pulse" *ngIf="drStockData.current_stock.length != 0 "
    (click)="exportAsXLSX(stockTab)">
    <img src="assets/img/excel.svg">
    Download Excel
</button>
</div>
<div class="fab-btns" *ngIf="login_data.user_type =='DMS'">
    <button mat-fab class="excel pulse" *ngIf="drStockData.current_stock.length != 0 "
    (click)="exportAsXLSX(stockTab)">
    <img src="assets/img/excel.svg">
    Download Excel
</button>
</div> -->

        </div>

        <div *ngIf="tabType== 'Secondary Billing'" style="margin: -10px -10px 0px -10px;">

            <app-secondary-bill-upload-list
                [dataToReceive]="{'hide': true, 'id':dr_id, 'padding0':'padding0'}"></app-secondary-bill-upload-list>

        </div>


    </div>
</div>

<div class="fab-btns pulse "
    *ngIf="login_data.user_type!='DMS' && ((login_data.edit_primary_network=='1') || (login_data.edit_secondary_network=='1')) && tabType != 'transaction'">
    <button class="pulse" mat-fab color="primary" (click)="convertDr(network_type)">
        <i class="material-icons">swap_horiz</i>
        Convert To {{network_type == 'Primary' ? 'Secondary' : 'Primary'}}
    </button>
    <button class="pulse" mat-fab color="primary" (click)="mergeData('transfercustomerData')">
        <i class="material-icons">swap_horiz</i>
        Merge Party Data
    </button>
</div>