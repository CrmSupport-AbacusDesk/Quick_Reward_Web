<div class="main-container">
  <div class="tools-container">
    <h2>Image Gallary</h2>
  </div>

  <div class="container pt10 pl10 pr10 pb50">
    <div class="row">
      <div class="col s12">
        <div class="card pb0">
          <div class="card-body cs-form">
            <div class="row">
              <div class="col s12 m3 l3">
                <div class="selct-all text-left" *ngIf="states.length > 0">
                  <mat-checkbox [(ngModel)]="data.checkUser" name="checkUser" color="primary"
                    (click)="allSelect('state'); getSalesUser('')">Select All State</mat-checkbox>
                </div>

                <mat-form-field appearance="outline">
                  <mat-label>State</mat-label>
                  <mat-select name="state" #state="ngModel" [(ngModel)]="data.state" multiple
                    (selectionChange)="getSalesUser('')">
                    <mat-option>
                      <ngx-mat-select-search noEntriesFoundLabel="'no data found'" placeholderLabel="Search.."
                        (keyup)="getAllList($event.target.value,'')"></ngx-mat-select-search>
                    </mat-option>
                    <mat-option *ngFor="let row of states" value="{{row.state_name}}">
                      {{row.state_name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col s12 m3 l3">
                <div class="selct-all text-left" *ngIf="reportingOne.length > 0">
                  <mat-checkbox [(ngModel)]="data.rm1" name="rm1" color="primary"
                    (click)="allSelect('rm1'); getSalesUser('')">Select All Reporting Manager</mat-checkbox>
                </div>

                <mat-form-field appearance="outline">
                  <mat-label>Reporting Manager</mat-label>
                  <mat-select name="rsm1" #rsm1="ngModel" [(ngModel)]="data.rsm1" multiple
                    (selectionChange)="getSalesUser('')">
                    <mat-option>
                      <ngx-mat-select-search noEntriesFoundLabel="'no data found'" placeholderLabel="Search.."
                        (keyup)="getAllList('',$event.target.value)"></ngx-mat-select-search>
                    </mat-option>

                    <mat-option *ngFor="let list of reportingOne; let index=index" value="{{list.id}}">
                      {{list.name? (list.name | titlecase) : '---'}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col s12 m3 l3" [ngClass]="{'mt24': states.length > 0 || reportingOne.length > 0}">
                <mat-form-field appearance="outline">
                  <mat-label>Sales User *</mat-label>
                  <mat-select name="user_id" [(ngModel)]="data.user_id" #user_id="ngModel" multiple>
                    <mat-option *ngIf="salesUser.length > 0">
                      <ngx-mat-select-search noEntriesFoundLabel="'no data found'" placeholderLabel="Search.."
                        (keyup)="getSalesUser($event.target.value)"></ngx-mat-select-search>
                    </mat-option>
                    <mat-option class="remove-check" (click)="selectAll()">
                      <mat-checkbox [(ngModel)]="data.checkUser" name="checkUser" color="primary"
                        [checked]="allUser.length == salesUser.length && salesUser.length !=0 && allUser.length > 0">All</mat-checkbox>
                    </mat-option>
                    <mat-option *ngFor="let row of salesUser" value="{{row.id}}">{{row.name ? (row.name | titlecase) :
                      ''}}
                      {{row.role_name}}</mat-option>

                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col s12 m3 l3"
                [ngClass]="{'mt24': states.length > 0 || reportingOne.length > 0 || user.length > 0}">
                <mat-form-field class="cs-input" appearance="outline">
                  <mat-label>Module *</mat-label>
                  <mat-select name="module" placeholder="Type Here ..." #module="ngModel" [(ngModel)]="data.module">
                    <mat-option value="Attendance">Attendance</mat-option>
                    <mat-option value="Checkin">Checkin</mat-option>
                    <mat-option value="Expesne">Expesne</mat-option>
                    <mat-option value="Event">Event</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>


            <div class="row">
              <div class="col s12 m3 l3">
                <mat-form-field appearance="outline">
                  <mat-label>Date From *</mat-label>
                  <input matInput [matDatepicker]="picker2" name="date_from" (dateChange)="date($event)"
                    [max]="data.date_to||today_date" [(ngModel)]="data.date_from" readonly>
                  <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                  <mat-datepicker #picker2></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="col s12 m3 l3">
                <mat-form-field appearance="outline">
                  <mat-label>Date To *</mat-label>
                  <input matInput [matDatepicker]="picker3" name="date_to" [min]="data.date_from" [max]="today_date"
                    (dateChange)="date($event)" [(ngModel)]="data.date_to" readonly>
                  <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                  <mat-datepicker #picker3></mat-datepicker>
                </mat-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt10">
      <div class="col s12">
        <div class="text-right">
          <button [ngClass]="{'loading': savingFlag == true}" mat-raised-button color="accent" (click)="filter()"
            [disabled]="savingFlag == true">
            {{savingFlag == true ? 'Please Wait' : 'Search'}}
          </button>

          <ng-container
            *ngIf="!data.date_from || !data.date_to || !data.state || !data.rsm1 || !data.module || !data.user_id">
            <a class="ml10" mat-raised-button color="warn" (click)="clearFilter()">
              Clear
            </a>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>